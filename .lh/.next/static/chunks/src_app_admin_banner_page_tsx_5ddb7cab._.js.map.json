{
    "sourceFile": ".next/static/chunks/src_app_admin_banner_page_tsx_5ddb7cab._.js.map",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746891743166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "{\n  \"version\": 3,\n  \"sources\": [],\n  \"sections\": [\n    {\"offset\": {\"line\": 7, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"file://C%3A/Users/hongh/aishh/src/app/admin/banner/page.tsx\"],\"sourcesContent\":[\"\\\"use client\\\";\\r\\nimport React, { useState, useCallback } from \\\"react\\\";\\r\\nimport Image from \\\"next/image\\\";\\r\\n\\r\\ninterface Banner {\\r\\n  _id: string;\\r\\n  imageUrl: string;\\r\\n  title: string;\\r\\n  description: string;\\r\\n  link: string;\\r\\n  order: number;\\r\\n  isActive: boolean;\\r\\n}\\r\\n\\r\\nconst BannerManagement = () => {\\r\\n  const [banners, setBanners] = useState<Banner[]>([]);\\r\\n  const [editingBanner, setEditingBanner] = useState<Banner | null>(null);\\r\\n  const [error, setError] = useState<string | null>(null);\\r\\n  const [isLoading, setIsLoading] = useState(false);\\r\\n\\r\\n  const fetchBanners = useCallback(async () => {\\r\\n    try {\\r\\n      setIsLoading(true);\\r\\n      const response = await fetch(\\\"/api/banners\\\");\\r\\n      if (!response.ok) {\\r\\n        throw new Error(\\\"Failed to fetch banners\\\");\\r\\n      }\\r\\n      const data = await response.json();\\r\\n      setBanners(data);\\r\\n    } catch (error) {\\r\\n      console.error(\\\"Error fetching banners:\\\", error);\\r\\n      setError(\\\"Failed to load banners\\\");\\r\\n    } finally {\\r\\n      setIsLoading(false);\\r\\n    }\\r\\n  }, []);\\r\\n\\r\\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\\r\\n    if (!e.target.files?.length) return;\\r\\n\\r\\n    const file = e.target.files[0];\\r\\n    if (!file) return;\\r\\n\\r\\n    if (file.size > 5 * 1024 * 1024) {\\r\\n      setError(\\\"File size must be less than 5MB\\\");\\r\\n      return;\\r\\n    }\\r\\n\\r\\n    if (!file.type.startsWith(\\\"image/\\\")) {\\r\\n      setError(\\\"Only image files are allowed\\\");\\r\\n      return;\\r\\n    }\\r\\n\\r\\n    try {\\r\\n      setIsLoading(true);\\r\\n      const formData = new FormData();\\r\\n      formData.append(\\\"files\\\", file);\\r\\n\\r\\n      const uploadResponse = await fetch(\\\"/api/upload\\\", {\\r\\n        method: \\\"POST\\\",\\r\\n        body: formData,\\r\\n      });\\r\\n\\r\\n      if (!uploadResponse.ok) {\\r\\n        throw new Error(\\\"Failed to upload image\\\");\\r\\n      }\\r\\n\\r\\n      const uploadData = await uploadResponse.json();\\r\\n      if (!uploadData.success || !uploadData.urls?.[0]) {\\r\\n        throw new Error(\\\"No image URL received\\\");\\r\\n      }\\r\\n\\r\\n      const imageUrl = uploadData.urls[0];\\r\\n\\r\\n      if (editingBanner) {\\r\\n        const updateResponse = await fetch(\\\"/api/banners\\\", {\\r\\n          method: \\\"PUT\\\",\\r\\n          headers: {\\r\\n            \\\"Content-Type\\\": \\\"application/json\\\",\\r\\n          },\\r\\n          body: JSON.stringify({\\r\\n            _id: editingBanner._id,\\r\\n            imageUrl,\\r\\n            title: editingBanner.title,\\r\\n            description: editingBanner.description,\\r\\n            link: editingBanner.link,\\r\\n            order: editingBanner.order,\\r\\n            isActive: editingBanner.isActive,\\r\\n          }),\\r\\n        });\\r\\n\\r\\n        if (!updateResponse.ok) {\\r\\n          throw new Error(\\\"Failed to update banner\\\");\\r\\n        }\\r\\n      } else {\\r\\n        const createResponse = await fetch(\\\"/api/banners\\\", {\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            \\\"Content-Type\\\": \\\"application/json\\\",\\r\\n          },\\r\\n          body: JSON.stringify({\\r\\n            imageUrl,\\r\\n            title: \\\"\\\",\\r\\n            description: \\\"\\\",\\r\\n            link: \\\"\\\",\\r\\n            order: banners.length + 1,\\r\\n            isActive: true,\\r\\n          }),\\r\\n        });\\r\\n\\r\\n        if (!createResponse.ok) {\\r\\n          throw new Error(\\\"Failed to create banner\\\");\\r\\n        }\\r\\n      }\\r\\n\\r\\n      await fetchBanners();\\r\\n      setEditingBanner(null);\\r\\n      setError(null);\\r\\n    } catch (error) {\\r\\n      console.error(\\\"Error uploading file:\\\", error);\\r\\n      setError(error instanceof Error ? error.message : \\\"Failed to upload file\\\");\\r\\n    } finally {\\r\\n      setIsLoading(false);\\r\\n    }\\r\\n  };\\r\\n\\r\\n  const handleDelete = async (id: string) => {\\r\\n    if (!confirm(\\\"Are you sure you want to delete this banner?\\\")) return;\\r\\n\\r\\n    try {\\r\\n      setIsLoading(true);\\r\\n      const response = await fetch(\\\"/api/banners\\\", {\\r\\n        method: \\\"DELETE\\\",\\r\\n        headers: {\\r\\n          \\\"Content-Type\\\": \\\"application/json\\\",\\r\\n        },\\r\\n        body: JSON.stringify({ _id: id }),\\r\\n      });\\r\\n\\r\\n      if (!response.ok) {\\r\\n        throw new Error(\\\"Failed to delete banner\\\");\\r\\n      }\\r\\n\\r\\n      await fetchBanners();\\r\\n      setError(null);\\r\\n    } catch (error) {\\r\\n      console.error(\\\"Error deleting banner:\\\", error);\\r\\n      setError(error instanceof Error ? error.message : \\\"Failed to delete banner\\\");\\r\\n    } finally {\\r\\n      setIsLoading(false);\\r\\n    }\\r\\n  };\\r\\n\\r\\n  const handleSave = async () => {\\r\\n    if (!editingBanner) return;\\r\\n\\r\\n    try {\\r\\n      setIsLoading(true);\\r\\n      const response = await fetch(\\\"/api/banners\\\", {\\r\\n        method: \\\"PUT\\\",\\r\\n        headers: {\\r\\n          \\\"Content-Type\\\": \\\"application/json\\\",\\r\\n        },\\r\\n        body: JSON.stringify({\\r\\n          _id: editingBanner._id,\\r\\n          title: editingBanner.title,\\r\\n          description: editingBanner.description,\\r\\n          link: editingBanner.link,\\r\\n          order: editingBanner.order,\\r\\n          isActive: editingBanner.isActive,\\r\\n        }),\\r\\n      });\\r\\n\\r\\n      if (!response.ok) {\\r\\n        throw new Error(\\\"Failed to update banner\\\");\\r\\n      }\\r\\n\\r\\n      await fetchBanners();\\r\\n      setEditingBanner(null);\\r\\n      setError(null);\\r\\n    } catch (error) {\\r\\n      console.error(\\\"Error saving banner:\\\", error);\\r\\n      setError(error instanceof Error ? error.message : \\\"Failed to save banner\\\");\\r\\n    } finally {\\r\\n      setIsLoading(false);\\r\\n    }\\r\\n  };\\r\\n\\r\\n  return (\\r\\n    <div className=\\\"container mx-auto px-4 py-8\\\">\\r\\n      <h1 className=\\\"text-2xl font-bold mb-6\\\">Banner Management</h1>\\r\\n      \\r\\n      {error && (\\r\\n        <div className=\\\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\\\">\\r\\n          {error}\\r\\n        </div>\\r\\n      )}\\r\\n\\r\\n      <div className=\\\"mb-6\\\">\\r\\n        <label className=\\\"block text-sm font-medium text-gray-700 mb-2\\\">\\r\\n          Upload New Banner\\r\\n        </label>\\r\\n        <input\\r\\n          type=\\\"file\\\"\\r\\n          accept=\\\"image/*\\\"\\r\\n          onChange={handleFileUpload}\\r\\n          className=\\\"block w-full text-sm text-gray-500\\r\\n            file:mr-4 file:py-2 file:px-4\\r\\n            file:rounded-md file:border-0\\r\\n            file:text-sm file:font-semibold\\r\\n            file:bg-blue-50 file:text-blue-700\\r\\n            hover:file:bg-blue-100\\\"\\r\\n          disabled={isLoading}\\r\\n        />\\r\\n      </div>\\r\\n\\r\\n      <div className=\\\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\\\">\\r\\n        {banners.map((banner: Banner) => (\\r\\n          <div\\r\\n            key={banner._id}\\r\\n            className=\\\"bg-white rounded-lg shadow-md overflow-hidden\\\"\\r\\n          >\\r\\n            <div className=\\\"w-full aspect-[16/9] min-h-[120px] bg-gray-100 overflow-hidden rounded-lg\\\">\\r\\n              <a href={banner.imageUrl} target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\\r\\n                <img\\r\\n                  src={banner.imageUrl}\\r\\n                  alt={banner.title || \\\"Banner\\\"}\\r\\n                  className=\\\"w-full h-full object-cover\\\"\\r\\n                  style={{ display: 'block' }}\\r\\n                  onError={(e) => {\\r\\n                    e.currentTarget.src = '/images/placeholder.jpg';\\r\\n                  }}\\r\\n                />\\r\\n              </a>\\r\\n            </div>\\r\\n            <div className=\\\"p-4\\\">\\r\\n              <span className=\\\"text-sm text-gray-600 truncate block\\\">\\r\\n                {banner.title}\\r\\n              </span>\\r\\n            </div>\\r\\n          </div>\\r\\n        ))}\\r\\n      </div>\\r\\n    </div>\\r\\n  );\\r\\n};\\r\\n\\r\\nexport default BannerManagement; \"],\"names\":[],\"mappings\":\"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\",\"debugId\":null}}]\n}"
        }
    ]
}