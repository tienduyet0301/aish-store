{
    "sourceFile": ".next/server/chunks/ssr/src_app_admin_banner_page_tsx_b2840e1c._.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746891731276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "module.exports = {\n\n\"[project]/src/app/admin/banner/page.tsx [app-ssr] (ecmascript)\": ((__turbopack_context__) => {\n\"use strict\";\n\nvar { g: global, __dirname } = __turbopack_context__;\n{\n__turbopack_context__.s({\n    \"default\": (()=>__TURBOPACK__default__export__)\n});\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)\");\n\"use client\";\n;\n;\nconst BannerManagement = ()=>{\n    const [banners, setBanners] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"useState\"])([]);\n    const [editingBanner, setEditingBanner] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"useState\"])(null);\n    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"useState\"])(null);\n    const [isLoading, setIsLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"useState\"])(false);\n    const fetchBanners = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"useCallback\"])(async ()=>{\n        try {\n            setIsLoading(true);\n            const response = await fetch(\"/api/banners\");\n            if (!response.ok) {\n                throw new Error(\"Failed to fetch banners\");\n            }\n            const data = await response.json();\n            setBanners(data);\n        } catch (error) {\n            console.error(\"Error fetching banners:\", error);\n            setError(\"Failed to load banners\");\n        } finally{\n            setIsLoading(false);\n        }\n    }, []);\n    const handleFileUpload = async (e)=>{\n        if (!e.target.files?.length) return;\n        const file = e.target.files[0];\n        if (!file) return;\n        if (file.size > 5 * 1024 * 1024) {\n            setError(\"File size must be less than 5MB\");\n            return;\n        }\n        if (!file.type.startsWith(\"image/\")) {\n            setError(\"Only image files are allowed\");\n            return;\n        }\n        try {\n            setIsLoading(true);\n            const formData = new FormData();\n            formData.append(\"files\", file);\n            const uploadResponse = await fetch(\"/api/upload\", {\n                method: \"POST\",\n                body: formData\n            });\n            if (!uploadResponse.ok) {\n                throw new Error(\"Failed to upload image\");\n            }\n            const uploadData = await uploadResponse.json();\n            if (!uploadData.success || !uploadData.urls?.[0]) {\n                throw new Error(\"No image URL received\");\n            }\n            const imageUrl = uploadData.urls[0];\n            if (editingBanner) {\n                const updateResponse = await fetch(\"/api/banners\", {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        _id: editingBanner._id,\n                        imageUrl,\n                        title: editingBanner.title,\n                        description: editingBanner.description,\n                        link: editingBanner.link,\n                        order: editingBanner.order,\n                        isActive: editingBanner.isActive\n                    })\n                });\n                if (!updateResponse.ok) {\n                    throw new Error(\"Failed to update banner\");\n                }\n            } else {\n                const createResponse = await fetch(\"/api/banners\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        imageUrl,\n                        title: \"\",\n                        description: \"\",\n                        link: \"\",\n                        order: banners.length + 1,\n                        isActive: true\n                    })\n                });\n                if (!createResponse.ok) {\n                    throw new Error(\"Failed to create banner\");\n                }\n            }\n            await fetchBanners();\n            setEditingBanner(null);\n            setError(null);\n        } catch (error) {\n            console.error(\"Error uploading file:\", error);\n            setError(error instanceof Error ? error.message : \"Failed to upload file\");\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleDelete = async (id)=>{\n        if (!confirm(\"Are you sure you want to delete this banner?\")) return;\n        try {\n            setIsLoading(true);\n            const response = await fetch(\"/api/banners\", {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    _id: id\n                })\n            });\n            if (!response.ok) {\n                throw new Error(\"Failed to delete banner\");\n            }\n            await fetchBanners();\n            setError(null);\n        } catch (error) {\n            console.error(\"Error deleting banner:\", error);\n            setError(error instanceof Error ? error.message : \"Failed to delete banner\");\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleSave = async ()=>{\n        if (!editingBanner) return;\n        try {\n            setIsLoading(true);\n            const response = await fetch(\"/api/banners\", {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    _id: editingBanner._id,\n                    title: editingBanner.title,\n                    description: editingBanner.description,\n                    link: editingBanner.link,\n                    order: editingBanner.order,\n                    isActive: editingBanner.isActive\n                })\n            });\n            if (!response.ok) {\n                throw new Error(\"Failed to update banner\");\n            }\n            await fetchBanners();\n            setEditingBanner(null);\n            setError(null);\n        } catch (error) {\n            console.error(\"Error saving banner:\", error);\n            setError(error instanceof Error ? error.message : \"Failed to save banner\");\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n        className: \"container mx-auto px-4 py-8\",\n        children: [\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h1\", {\n                className: \"text-2xl font-bold mb-6\",\n                children: \"Banner Management\"\n            }, void 0, false, {\n                fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                lineNumber: 191,\n                columnNumber: 7\n            }, this),\n            error && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",\n                children: error\n            }, void 0, false, {\n                fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                lineNumber: 194,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                className: \"mb-6\",\n                children: [\n                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"label\", {\n                        className: \"block text-sm font-medium text-gray-700 mb-2\",\n                        children: \"Upload New Banner\"\n                    }, void 0, false, {\n                        fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                        lineNumber: 200,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"input\", {\n                        type: \"file\",\n                        accept: \"image/*\",\n                        onChange: handleFileUpload,\n                        className: \"block w-full text-sm text-gray-500   file:mr-4 file:py-2 file:px-4   file:rounded-md file:border-0   file:text-sm file:font-semibold   file:bg-blue-50 file:text-blue-700   hover:file:bg-blue-100\",\n                        disabled: isLoading\n                    }, void 0, false, {\n                        fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                        lineNumber: 203,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                lineNumber: 199,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n                children: banners.map((banner)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                        className: \"bg-white rounded-lg shadow-md overflow-hidden\",\n                        children: [\n                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                className: \"w-full aspect-[16/9] min-h-[120px] bg-gray-100 overflow-hidden rounded-lg\",\n                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"a\", {\n                                    href: banner.imageUrl,\n                                    target: \"_blank\",\n                                    rel: \"noopener noreferrer\",\n                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"img\", {\n                                        src: banner.imageUrl,\n                                        alt: banner.title || \"Banner\",\n                                        className: \"w-full h-full object-cover\",\n                                        style: {\n                                            display: 'block'\n                                        },\n                                        onError: (e)=>{\n                                            e.currentTarget.src = '/images/placeholder.jpg';\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                                        lineNumber: 225,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                                    lineNumber: 224,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                                lineNumber: 223,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                className: \"p-4\",\n                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"span\", {\n                                    className: \"text-sm text-gray-600 truncate block\",\n                                    children: banner.title\n                                }, void 0, false, {\n                                    fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                                    lineNumber: 237,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                                lineNumber: 236,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, banner._id, true, {\n                        fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                        lineNumber: 219,\n                        columnNumber: 11\n                    }, this))\n            }, void 0, false, {\n                fileName: \"[project]/src/app/admin/banner/page.tsx\",\n                lineNumber: 217,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"[project]/src/app/admin/banner/page.tsx\",\n        lineNumber: 190,\n        columnNumber: 5\n    }, this);\n};\nconst __TURBOPACK__default__export__ = BannerManagement;\n}}),\n\n};\n\n//# sourceMappingURL=src_app_admin_banner_page_tsx_b2840e1c._.js.map"
        }
    ]
}