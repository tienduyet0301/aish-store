{
    "sourceFile": "node_modules/mongodb/src/resource_management.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892636605,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "/**\n * @public\n */\nexport interface AsyncDisposable {\n  /**\n   * @beta\n   * @experimental\n   */\n  [Symbol.asyncDispose](): Promise<void>;\n\n  /**\n   * @internal\n   *\n   * A method that wraps disposal semantics for a given resource in the class.\n   */\n  asyncDispose(): Promise<void>;\n}\n\n/** @internal */\nexport function configureResourceManagement(target: AsyncDisposable) {\n  Symbol.asyncDispose &&\n    Object.defineProperty(target, Symbol.asyncDispose, {\n      value: async function asyncDispose(this: AsyncDisposable) {\n        await this.asyncDispose();\n      },\n      enumerable: false,\n      configurable: true,\n      writable: true\n    });\n}\n\n/**\n * @beta\n * @experimental\n *\n * Attaches `Symbol.asyncDispose` methods to the MongoClient, Cursors, sessions and change streams\n * if Symbol.asyncDispose is defined.\n *\n * It's usually not necessary to call this method - the driver attempts to attach these methods\n * itself when its loaded.  However, sometimes the driver may be loaded before `Symbol.asyncDispose`\n * is defined, in which case it is necessary to call this method directly.  This can happen if the\n * application is polyfilling `Symbol.asyncDispose`.\n *\n * Example:\n *\n * ```typescript\n * import { configureExplicitResourceManagement, MongoClient } from 'mongodb/lib/beta';\n *\n * Symbol.asyncDispose ??= Symbol('dispose');\n * load();\n *\n * await using client = new MongoClient(...);\n * ```\n */\nexport function configureExplicitResourceManagement() {\n  // We must import lazily here, because there's a circular dependency between the resource management\n  // file and each resources' file.  We could move `configureResourceManagement` to a separate\n  // function, but keeping all resource-management related code together seemed preferable and I chose\n  // lazy requiring of resources instead.\n\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { MongoClient } = require('./mongo_client');\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { ClientSession } = require('./sessions');\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { AbstractCursor } = require('./cursor/abstract_cursor');\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  const { ChangeStream } = require('./change_stream');\n\n  configureResourceManagement(MongoClient.prototype);\n  configureResourceManagement(ClientSession.prototype);\n  configureResourceManagement(AbstractCursor.prototype);\n  configureResourceManagement(ChangeStream.prototype);\n}\n"
        }
    ]
}