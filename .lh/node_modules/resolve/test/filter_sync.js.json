{
    "sourceFile": "node_modules/resolve/test/filter_sync.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746893010824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "var path = require('path');\nvar test = require('tape');\nvar resolve = require('../');\n\ntest('filter', function (t) {\n    var dir = path.join(__dirname, 'resolver');\n    var packageFilterArgs;\n    var res = resolve.sync('./baz', {\n        basedir: dir,\n        // NOTE: in v2.x, this will be `pkg, pkgfile, dir`, but must remain \"broken\" here in v1.x for compatibility\n        packageFilter: function (pkg, /*pkgfile,*/ dir) { // eslint-disable-line spaced-comment\n            pkg.main = 'doom'; // eslint-disable-line no-param-reassign\n            packageFilterArgs = 'is 1.x' ? [pkg, dir] : [pkg, pkgfile, dir]; // eslint-disable-line no-constant-condition, no-undef\n            return pkg;\n        }\n    });\n\n    t.equal(res, path.join(dir, 'baz/doom.js'), 'changing the package \"main\" works');\n\n    var packageData = packageFilterArgs[0];\n    t.equal(packageData.main, 'doom', 'package \"main\" was altered');\n\n    if (!'is 1.x') { // eslint-disable-line no-constant-condition\n        var packageFile = packageFilterArgs[1];\n        t.equal(packageFile, path.join(dir, 'baz', 'package.json'), 'package.json path is correct');\n    }\n\n    var packageDir = packageFilterArgs['is 1.x' ? 1 : 2]; // eslint-disable-line no-constant-condition\n    // eslint-disable-next-line no-constant-condition\n    t.equal(packageDir, path.join(dir, 'baz'), ('is 1.x' ? 'second' : 'third') + ' packageFilter argument is \"dir\"');\n\n    t.end();\n});\n"
        }
    ]
}