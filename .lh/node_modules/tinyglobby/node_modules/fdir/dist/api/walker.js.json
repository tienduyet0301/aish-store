{
    "sourceFile": "node_modules/tinyglobby/node_modules/fdir/dist/api/walker.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746893056092,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Walker = void 0;\nconst path_1 = require(\"path\");\nconst utils_1 = require(\"../utils\");\nconst joinPath = __importStar(require(\"./functions/join-path\"));\nconst pushDirectory = __importStar(require(\"./functions/push-directory\"));\nconst pushFile = __importStar(require(\"./functions/push-file\"));\nconst getArray = __importStar(require(\"./functions/get-array\"));\nconst groupFiles = __importStar(require(\"./functions/group-files\"));\nconst resolveSymlink = __importStar(require(\"./functions/resolve-symlink\"));\nconst invokeCallback = __importStar(require(\"./functions/invoke-callback\"));\nconst walkDirectory = __importStar(require(\"./functions/walk-directory\"));\nconst queue_1 = require(\"./queue\");\nconst counter_1 = require(\"./counter\");\nclass Walker {\n    root;\n    isSynchronous;\n    state;\n    joinPath;\n    pushDirectory;\n    pushFile;\n    getArray;\n    groupFiles;\n    resolveSymlink;\n    walkDirectory;\n    callbackInvoker;\n    constructor(root, options, callback) {\n        this.isSynchronous = !callback;\n        this.callbackInvoker = invokeCallback.build(options, this.isSynchronous);\n        this.root = (0, utils_1.normalizePath)(root, options);\n        this.state = {\n            root: this.root.slice(0, -1),\n            // Perf: we explicitly tell the compiler to optimize for String arrays\n            paths: [\"\"].slice(0, 0),\n            groups: [],\n            counts: new counter_1.Counter(),\n            options,\n            queue: new queue_1.Queue((error, state) => this.callbackInvoker(state, error, callback)),\n            symlinks: new Map(),\n            visited: [\"\"].slice(0, 0),\n        };\n        /*\n         * Perf: We conditionally change functions according to options. This gives a slight\n         * performance boost. Since these functions are so small, they are automatically inlined\n         * by the javascript engine so there's no function call overhead (in most cases).\n         */\n        this.joinPath = joinPath.build(this.root, options);\n        this.pushDirectory = pushDirectory.build(this.root, options);\n        this.pushFile = pushFile.build(options);\n        this.getArray = getArray.build(options);\n        this.groupFiles = groupFiles.build(options);\n        this.resolveSymlink = resolveSymlink.build(options, this.isSynchronous);\n        this.walkDirectory = walkDirectory.build(this.isSynchronous);\n    }\n    start() {\n        this.walkDirectory(this.state, this.root, this.root, this.state.options.maxDepth, this.walk);\n        return this.isSynchronous ? this.callbackInvoker(this.state, null) : null;\n    }\n    walk = (entries, directoryPath, depth) => {\n        const { paths, options: { filters, resolveSymlinks, excludeSymlinks, exclude, maxFiles, signal, useRealPaths, pathSeparator, }, } = this.state;\n        if ((signal && signal.aborted) || (maxFiles && paths.length > maxFiles))\n            return;\n        this.pushDirectory(directoryPath, paths, filters);\n        const files = this.getArray(this.state.paths);\n        for (let i = 0; i < entries.length; ++i) {\n            const entry = entries[i];\n            if (entry.isFile() ||\n                (entry.isSymbolicLink() && !resolveSymlinks && !excludeSymlinks)) {\n                const filename = this.joinPath(entry.name, directoryPath);\n                this.pushFile(filename, files, this.state.counts, filters);\n            }\n            else if (entry.isDirectory()) {\n                let path = joinPath.joinDirectoryPath(entry.name, directoryPath, this.state.options.pathSeparator);\n                if (exclude && exclude(entry.name, path))\n                    continue;\n                this.walkDirectory(this.state, path, path, depth - 1, this.walk);\n            }\n            else if (entry.isSymbolicLink() && this.resolveSymlink) {\n                let path = joinPath.joinPathWithBasePath(entry.name, directoryPath);\n                this.resolveSymlink(path, this.state, (stat, resolvedPath) => {\n                    if (stat.isDirectory()) {\n                        resolvedPath = (0, utils_1.normalizePath)(resolvedPath, this.state.options);\n                        if (exclude && exclude(entry.name, useRealPaths ? resolvedPath : path + pathSeparator))\n                            return;\n                        this.walkDirectory(this.state, resolvedPath, useRealPaths ? resolvedPath : path + pathSeparator, depth - 1, this.walk);\n                    }\n                    else {\n                        resolvedPath = useRealPaths ? resolvedPath : path;\n                        const filename = (0, path_1.basename)(resolvedPath);\n                        const directoryPath = (0, utils_1.normalizePath)((0, path_1.dirname)(resolvedPath), this.state.options);\n                        resolvedPath = this.joinPath(filename, directoryPath);\n                        this.pushFile(resolvedPath, files, this.state.counts, filters);\n                    }\n                });\n            }\n        }\n        this.groupFiles(this.state.groups, directoryPath, files);\n    };\n}\nexports.Walker = Walker;\n"
        }
    ]
}