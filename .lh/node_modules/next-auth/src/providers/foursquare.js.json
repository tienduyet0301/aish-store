{
    "sourceFile": "node_modules/next-auth/src/providers/foursquare.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892934917,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "import { get } from \"https\"\nimport { once } from \"events\"\n\n/** @type {import(\"src/providers\").OAuthProvider} */\n/** @type {import(\".\").OAuthProvider} */\nexport default function Foursquare(options) {\n  const { apiVersion = \"20230131\" } = options\n  return {\n    id: \"foursquare\",\n    name: \"Foursquare\",\n    type: \"oauth\",\n    authorization: \"https://foursquare.com/oauth2/authenticate\",\n    token: \"https://foursquare.com/oauth2/access_token\",\n    userinfo: {\n      async request({ tokens }) {\n        const url = new URL(\"https://api.foursquare.com/v2/users/self\")\n        url.searchParams.append(\"v\", apiVersion)\n        url.searchParams.append(\"oauth_token\", tokens.access_token)\n\n        const req = get(url, { timeout: 3500 })\n        const [response] = await Promise.race([\n          once(req, \"response\"),\n          once(req, \"timeout\"),\n        ])\n\n        // timeout reached\n        if (!response) {\n          req.destroy()\n          throw new Error(\"HTTP Request Timed Out\")\n        }\n        if (response.statusCode !== 200) {\n          throw new Error(\"Expected 200 OK from the userinfo endpoint\")\n        }\n\n        const parts = []\n        for await (const part of response) {\n          parts.push(part)\n        }\n\n        return JSON.parse(Buffer.concat(parts))\n      },\n    },\n    profile({ response: { user: profile } }) {\n      return {\n        id: profile.id,\n        name: `${profile.firstName} ${profile.lastName}`,\n        email: profile.contact.email,\n        image: profile.photo\n          ? `${profile.photo.prefix}original${profile.photo.suffix}`\n          : null,\n      }\n    },\n    style: {\n      logo: \"/foursquare.svg\",\n      text: \"#fff\",\n      bg: \"#000\",\n    },\n    options,\n  }\n}\n"
        }
    ]
}