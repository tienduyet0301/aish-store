{
    "sourceFile": "node_modules/next-auth/src/providers/trakt.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892935849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "import type { OAuthConfig, OAuthUserConfig } from \".\"\n\nexport interface TraktUser extends Record<string, any> {\n  username: string\n  private: boolean\n  name: string\n  vip: boolean\n  vip_ep: boolean\n  ids: { slug: string }\n  joined_at: string\n  location: string | null\n  about: string | null\n  gender: string | null\n  age: number | null\n  images: { avatar: { full: string } }\n}\n\nexport default function Trakt<P extends TraktUser>(\n  options: OAuthUserConfig<P>\n): OAuthConfig<P> {\n  return {\n    id: \"trakt\",\n    name: \"Trakt\",\n    type: \"oauth\",\n    authorization: {\n      url: \"https://trakt.tv/oauth/authorize\",\n      params: { scope: \"\" }, // when default, trakt returns auth error\n    },\n    token: \"https://api.trakt.tv/oauth/token\",\n\n    userinfo: {\n      async request(context) {\n        const res = await fetch(\"https://api.trakt.tv/users/me?extended=full\", {\n          headers: {\n            Authorization: `Bearer ${context.tokens.access_token}`,\n            \"trakt-api-version\": \"2\",\n            \"trakt-api-key\": context.provider.clientId as string,\n          },\n        })\n\n        if (res.ok) return await res.json()\n\n        throw new Error(\"Expected 200 OK from the userinfo endpoint\")\n      },\n    },\n    profile(profile) {\n      return {\n        id: profile.ids.slug,\n        name: profile.name,\n        email: null, // trakt does not provide user emails\n        image: profile.images.avatar.full, // trakt does not allow hotlinking\n      }\n    },\n    style: { logo: \"/trakt.svg\", bg: \"#ED2224\", text: \"#fff\" },\n    options,\n  }\n}\n"
        }
    ]
}