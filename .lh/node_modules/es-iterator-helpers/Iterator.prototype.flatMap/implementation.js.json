{
    "sourceFile": "node_modules/es-iterator-helpers/Iterator.prototype.flatMap/implementation.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892195056,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "'use strict';\n\nvar $TypeError = require('es-errors/type');\n\nvar Call = require('es-abstract/2024/Call');\nvar CompletionRecord = require('es-abstract/2024/CompletionRecord');\nvar CreateIteratorFromClosure = require('../aos/CreateIteratorFromClosure');\nvar GetIteratorDirect = require('../aos/GetIteratorDirect');\nvar GetIteratorFlattenable = require('../aos/GetIteratorFlattenable');\nvar IsCallable = require('es-abstract/2024/IsCallable');\nvar IteratorClose = require('es-abstract/2024/IteratorClose');\nvar IteratorStepValue = require('es-abstract/2024/IteratorStepValue');\nvar ThrowCompletion = require('es-abstract/2024/ThrowCompletion');\nvar Type = require('es-abstract/2024/Type');\n\nvar iterHelperProto = require('../IteratorHelperPrototype');\n\nvar SLOT = require('internal-slot');\n\nmodule.exports = function flatMap(mapper) {\n\tif (this instanceof flatMap) {\n\t\tthrow new $TypeError('`flatMap` is not a constructor');\n\t}\n\n\tvar O = this; // step 1\n\tif (Type(O) !== 'Object') {\n\t\tthrow new $TypeError('`this` value must be an Object'); // step 2\n\t}\n\n\tif (!IsCallable(mapper)) {\n\t\tthrow new $TypeError('`mapper` must be a function'); // step 3\n\t}\n\n\tvar iterated = GetIteratorDirect(O); // step 4\n\n\tvar sentinel = { sentinel: true };\n\tvar innerIterator = sentinel;\n\n\tvar closeIfAbrupt = function (abruptCompletion) {\n\t\tif (!(abruptCompletion instanceof CompletionRecord)) {\n\t\t\tthrow new $TypeError('`abruptCompletion` must be a Completion Record');\n\t\t}\n\t\ttry {\n\t\t\tif (innerIterator !== sentinel) {\n\t\t\t\tIteratorClose(\n\t\t\t\t\tinnerIterator,\n\t\t\t\t\tabruptCompletion\n\t\t\t\t);\n\t\t\t}\n\t\t} finally {\n\t\t\tinnerIterator = sentinel;\n\n\t\t\tIteratorClose(\n\t\t\t\titerated,\n\t\t\t\tabruptCompletion\n\t\t\t);\n\t\t}\n\t};\n\n\tvar counter = 0; // step 5.a\n\tvar innerAlive = false;\n\tvar closure = function () {\n\t\t// while (true) { // step 5.b\n\t\tif (innerIterator === sentinel) {\n\t\t\tvar value = IteratorStepValue(iterated); // step 5.b.i\n\t\t\tif (iterated['[[Done]]']) {\n\t\t\t\tinnerAlive = false;\n\t\t\t\tinnerIterator = sentinel;\n\t\t\t\t// return void undefined; // step 5.b.ii\n\t\t\t\treturn sentinel;\n\t\t\t}\n\t\t}\n\n\t\tif (innerIterator === sentinel) {\n\t\t\tinnerAlive = true; // step 5.b.viii\n\t\t\ttry {\n\t\t\t\tvar mapped = Call(mapper, void undefined, [value, counter]); // step 5.b.iv\n\t\t\t\t// yield mapped // step 5.b.vi\n\t\t\t\tinnerIterator = GetIteratorFlattenable(mapped, 'REJECT-STRINGS'); // step 5.b.vi\n\t\t\t} catch (e) {\n\t\t\t\tinnerAlive = false;\n\t\t\t\tinnerIterator = sentinel;\n\t\t\t\tcloseIfAbrupt(ThrowCompletion(e)); // steps 5.b.v, 5.b.vii\n\t\t\t} finally {\n\t\t\t\tcounter += 1; // step 5.b.x\n\t\t\t}\n\t\t}\n\t\t// while (innerAlive) { // step 5.b.ix\n\t\tif (innerAlive) {\n\t\t\t// step 5.b.ix.4\n\t\t\tvar innerValue;\n\t\t\ttry {\n\t\t\t\tinnerValue = IteratorStepValue(innerIterator); // step 5.b.ix.4.a\n\t\t\t} catch (e) {\n\t\t\t\tinnerAlive = false;\n\t\t\t\tinnerIterator = sentinel;\n\t\t\t\tcloseIfAbrupt(ThrowCompletion(e)); // step 5.b.ix.4.b\n\t\t\t}\n\t\t\tif (innerIterator['[[Done]]']) {\n\t\t\t\tinnerAlive = false;\n\t\t\t\tinnerIterator = sentinel;\n\t\t\t\treturn closure();\n\t\t\t}\n\t\t\treturn innerValue; // step 5.b.ix.4.c\n\t\t}\n\t\t// }\n\t\t// return void undefined;\n\t\treturn sentinel;\n\t};\n\tSLOT.set(closure, '[[Sentinel]]', sentinel); // for the userland implementation\n\tSLOT.set(closure, '[[CloseIfAbrupt]]', closeIfAbrupt); // for the userland implementation\n\n\tvar result = CreateIteratorFromClosure(closure, 'Iterator Helper', iterHelperProto, ['[[UnderlyingIterators]]']); // step 7\n\n\tSLOT.set(result, '[[UnderlyingIterators]]', [iterated]); // step 8\n\n\treturn result; // step 9\n};\n"
        }
    ]
}