{
    "sourceFile": "node_modules/next/dist/esm/client/components/react-dev-overlay/font/get-dev-overlay-font-middleware.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892767584,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "import path from 'path';\nimport * as fs from 'fs/promises';\nimport { constants } from 'fs';\nimport * as Log from '../../../../build/output/log';\nimport { middlewareResponse } from '../server/middleware-response';\nconst FONT_PREFIX = '/__nextjs_font/';\nconst VALID_FONTS = [\n    'geist-latin-ext.woff2',\n    'geist-mono-latin-ext.woff2',\n    'geist-latin.woff2',\n    'geist-mono-latin.woff2'\n];\nconst FONT_HEADERS = {\n    'Content-Type': 'font/woff2',\n    'Cache-Control': 'public, max-age=31536000, immutable'\n};\nexport function getDevOverlayFontMiddleware() {\n    return async function devOverlayFontMiddleware(req, res, next) {\n        try {\n            const { pathname } = new URL(\"http://n\" + req.url);\n            if (!pathname.startsWith(FONT_PREFIX)) {\n                return next();\n            }\n            const fontFile = pathname.replace(FONT_PREFIX, '');\n            if (!VALID_FONTS.includes(fontFile)) {\n                return middlewareResponse.notFound(res);\n            }\n            const fontPath = path.resolve(__dirname, fontFile);\n            const fileExists = await checkFileExists(fontPath);\n            if (!fileExists) {\n                return middlewareResponse.notFound(res);\n            }\n            const fontData = await fs.readFile(fontPath);\n            Object.entries(FONT_HEADERS).forEach((param)=>{\n                let [key, value] = param;\n                res.setHeader(key, value);\n            });\n            res.end(fontData);\n        } catch (err) {\n            Log.error('Failed to serve font:', err instanceof Error ? err.message : err);\n            return middlewareResponse.internalServerError(res);\n        }\n    };\n}\nasync function checkFileExists(filePath) {\n    try {\n        await fs.access(filePath, constants.F_OK);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n//# sourceMappingURL=get-dev-overlay-font-middleware.js.map"
        }
    ]
}