{
    "sourceFile": "node_modules/next/dist/esm/build/webpack/plugins/subresource-integrity-plugin.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892760456,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "import { webpack, sources } from 'next/dist/compiled/webpack/webpack';\nimport crypto from 'crypto';\nimport { SUBRESOURCE_INTEGRITY_MANIFEST } from '../../../shared/lib/constants';\nconst PLUGIN_NAME = 'SubresourceIntegrityPlugin';\nexport class SubresourceIntegrityPlugin {\n    constructor(algorithm){\n        this.algorithm = algorithm;\n    }\n    apply(compiler) {\n        compiler.hooks.make.tap(PLUGIN_NAME, (compilation)=>{\n            compilation.hooks.afterProcessAssets.tap({\n                name: PLUGIN_NAME,\n                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ADDITIONS\n            }, ()=>{\n                // Collect all the assets.\n                let files = new Set();\n                for (const asset of compilation.getAssets()){\n                    files.add(asset.name);\n                }\n                // For each file, deduped, calculate the file hash.\n                const hashes = {};\n                for (const file of files.values()){\n                    // Get the buffer for the asset.\n                    const asset = compilation.getAsset(file);\n                    if (!asset) {\n                        throw Object.defineProperty(new Error(`could not get asset: ${file}`), \"__NEXT_ERROR_CODE\", {\n                            value: \"E349\",\n                            enumerable: false,\n                            configurable: true\n                        });\n                    }\n                    // Get the buffer for the asset.\n                    const buffer = asset.source.buffer();\n                    // Create the hash for the content.\n                    const hash = crypto.createHash(this.algorithm).update(buffer).digest().toString('base64');\n                    hashes[file] = `${this.algorithm}-${hash}`;\n                }\n                const json = JSON.stringify(hashes, null, 2);\n                const file = 'server/' + SUBRESOURCE_INTEGRITY_MANIFEST;\n                compilation.emitAsset(file + '.js', new sources.RawSource(`self.__SUBRESOURCE_INTEGRITY_MANIFEST=${JSON.stringify(json)}`));\n                compilation.emitAsset(file + '.json', new sources.RawSource(json));\n            });\n        });\n    }\n}\n\n//# sourceMappingURL=subresource-integrity-plugin.js.map"
        }
    ]
}