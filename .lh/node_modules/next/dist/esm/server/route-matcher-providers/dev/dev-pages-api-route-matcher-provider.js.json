{
    "sourceFile": "node_modules/next/dist/esm/server/route-matcher-providers/dev/dev-pages-api-route-matcher-provider.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892839391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "import { PagesAPILocaleRouteMatcher, PagesAPIRouteMatcher } from '../../route-matchers/pages-api-route-matcher';\nimport { RouteKind } from '../../route-kind';\nimport path from 'path';\nimport { FileCacheRouteMatcherProvider } from './file-cache-route-matcher-provider';\nimport { DevPagesNormalizers } from '../../normalizers/built/pages';\nexport class DevPagesAPIRouteMatcherProvider extends FileCacheRouteMatcherProvider {\n    constructor(pagesDir, extensions, reader, localeNormalizer){\n        super(pagesDir, reader), this.pagesDir = pagesDir, this.extensions = extensions, this.localeNormalizer = localeNormalizer;\n        // Match any route file that ends with `/${filename}.${extension}` under the\n        // pages directory.\n        this.expression = new RegExp(`\\\\.(?:${extensions.join('|')})$`);\n        this.normalizers = new DevPagesNormalizers(pagesDir, extensions);\n    }\n    test(filename) {\n        // If the file does not end in the correct extension it's not a match.\n        if (!this.expression.test(filename)) return false;\n        // Pages API routes must exist in the pages directory with the `/api/`\n        // prefix. The pathnames being tested here though are the full filenames,\n        // so we need to include the pages directory.\n        // TODO: could path separator normalization be needed here?\n        if (filename.startsWith(path.join(this.pagesDir, '/api/'))) return true;\n        for (const extension of this.extensions){\n            // We can also match if we have `pages/api.${extension}`, so check to\n            // see if it's a match.\n            if (filename === path.join(this.pagesDir, `api.${extension}`)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    async transform(files) {\n        const matchers = [];\n        for (const filename of files){\n            // If the file isn't a match for this matcher, then skip it.\n            if (!this.test(filename)) continue;\n            const pathname = this.normalizers.pathname.normalize(filename);\n            const page = this.normalizers.page.normalize(filename);\n            const bundlePath = this.normalizers.bundlePath.normalize(filename);\n            if (this.localeNormalizer) {\n                matchers.push(new PagesAPILocaleRouteMatcher({\n                    kind: RouteKind.PAGES_API,\n                    pathname,\n                    page,\n                    bundlePath,\n                    filename,\n                    i18n: {}\n                }));\n            } else {\n                matchers.push(new PagesAPIRouteMatcher({\n                    kind: RouteKind.PAGES_API,\n                    pathname,\n                    page,\n                    bundlePath,\n                    filename\n                }));\n            }\n        }\n        return matchers;\n    }\n}\n\n//# sourceMappingURL=dev-pages-api-route-matcher-provider.js.map"
        }
    ]
}