{
    "sourceFile": "node_modules/next/dist/esm/server/lib/i18n-provider.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892830850,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "import { getRequestMeta } from '../request-meta';\n/**\n * The I18NProvider is used to match locale aware routes, detect the locale from\n * the pathname and hostname and normalize the pathname by removing the locale\n * prefix.\n */ export class I18NProvider {\n    constructor(config){\n        var _config_domains;\n        this.config = config;\n        if (!config.locales.length) {\n            throw Object.defineProperty(new Error('Invariant: No locales provided'), \"__NEXT_ERROR_CODE\", {\n                value: \"E510\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        this.lowerCaseLocales = config.locales.map((locale)=>locale.toLowerCase());\n        this.lowerCaseDomains = (_config_domains = config.domains) == null ? void 0 : _config_domains.map((domainLocale)=>{\n            var _domainLocale_locales;\n            const domain = domainLocale.domain.toLowerCase();\n            return {\n                defaultLocale: domainLocale.defaultLocale.toLowerCase(),\n                hostname: domain.split(':', 1)[0],\n                domain,\n                locales: (_domainLocale_locales = domainLocale.locales) == null ? void 0 : _domainLocale_locales.map((locale)=>locale.toLowerCase()),\n                http: domainLocale.http\n            };\n        });\n    }\n    /**\n   * Detects the domain locale from the hostname and the detected locale if\n   * provided.\n   *\n   * @param hostname The hostname to detect the domain locale from, this must be lowercased.\n   * @param detectedLocale The detected locale to use if the hostname does not match.\n   * @returns The domain locale if found, `undefined` otherwise.\n   */ detectDomainLocale(hostname, detectedLocale) {\n        if (!hostname || !this.lowerCaseDomains || !this.config.domains) return;\n        if (detectedLocale) detectedLocale = detectedLocale.toLowerCase();\n        for(let i = 0; i < this.lowerCaseDomains.length; i++){\n            var // Configuration validation ensures that the locale is not repeated in\n            // other domains locales.\n            _domainLocale_locales;\n            const domainLocale = this.lowerCaseDomains[i];\n            if (// We assume that the hostname is already lowercased.\n            domainLocale.hostname === hostname || ((_domainLocale_locales = domainLocale.locales) == null ? void 0 : _domainLocale_locales.some((locale)=>locale === detectedLocale))) {\n                return this.config.domains[i];\n            }\n        }\n        return;\n    }\n    /**\n   * Pulls the pre-computed locale and inference results from the query\n   * object.\n   *\n   * @param req the request object\n   * @param pathname the pathname that could contain a locale prefix\n   * @returns the locale analysis result\n   */ fromRequest(req, pathname) {\n        const detectedLocale = getRequestMeta(req, 'locale');\n        // If a locale was detected on the query, analyze the pathname to ensure\n        // that the locale matches.\n        if (detectedLocale) {\n            const analysis = this.analyze(pathname);\n            // If the analysis contained a locale we should validate it against the\n            // query and strip it from the pathname.\n            if (analysis.detectedLocale) {\n                if (analysis.detectedLocale !== detectedLocale) {\n                    throw Object.defineProperty(new Error(`Invariant: The detected locale does not match the locale in the query. Expected to find '${detectedLocale}' in '${pathname}' but found '${analysis.detectedLocale}'}`), \"__NEXT_ERROR_CODE\", {\n                        value: \"E517\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                pathname = analysis.pathname;\n            }\n        }\n        return {\n            pathname,\n            detectedLocale,\n            inferredFromDefault: getRequestMeta(req, 'localeInferredFromDefault') ?? false\n        };\n    }\n    /**\n   * Analyzes the pathname for a locale and returns the pathname without it.\n   *\n   * @param pathname The pathname that could contain a locale prefix.\n   * @param options The options to use when matching the locale.\n   * @returns The matched locale and the pathname without the locale prefix\n   *          (if any).\n   */ analyze(pathname, options = {}) {\n        let detectedLocale = options.defaultLocale;\n        // By default, we assume that the default locale was inferred if there was\n        // no detected locale.\n        let inferredFromDefault = typeof detectedLocale === 'string';\n        // The first segment will be empty, because it has a leading `/`. If\n        // there is no further segment, there is no locale (or it's the default).\n        const segments = pathname.split('/', 2);\n        if (!segments[1]) return {\n            detectedLocale,\n            pathname,\n            inferredFromDefault\n        };\n        // The second segment will contain the locale part if any.\n        const segment = segments[1].toLowerCase();\n        // See if the segment matches one of the locales. If it doesn't, there is\n        // no locale (or it's the default).\n        const index = this.lowerCaseLocales.indexOf(segment);\n        if (index < 0) return {\n            detectedLocale,\n            pathname,\n            inferredFromDefault\n        };\n        // Return the case-sensitive locale.\n        detectedLocale = this.config.locales[index];\n        inferredFromDefault = false;\n        // Remove the `/${locale}` part of the pathname.\n        pathname = pathname.slice(detectedLocale.length + 1) || '/';\n        return {\n            detectedLocale,\n            pathname,\n            inferredFromDefault\n        };\n    }\n}\n\n//# sourceMappingURL=i18n-provider.js.map"
        }
    ]
}