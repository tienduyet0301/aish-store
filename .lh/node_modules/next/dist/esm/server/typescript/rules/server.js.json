{
    "sourceFile": "node_modules/next/dist/esm/server/typescript/rules/server.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892845578,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "import { DISALLOWED_SERVER_REACT_APIS, DISALLOWED_SERVER_REACT_DOM_APIS, NEXT_TS_ERRORS } from '../constant';\nimport { getTs } from '../utils';\nconst serverLayer = {\n    // On the server layer we need to filter out some invalid completion results.\n    filterCompletionsAtPosition (entries) {\n        return entries.filter((e)=>{\n            // Remove disallowed React APIs.\n            if (DISALLOWED_SERVER_REACT_APIS.includes(e.name) && e.source === 'react') {\n                return false;\n            }\n            return true;\n        });\n    },\n    // Filter out quick info for some React APIs.\n    hasDisallowedReactAPIDefinition (definitions) {\n        return definitions == null ? void 0 : definitions.some((d)=>DISALLOWED_SERVER_REACT_APIS.includes(d.name) && d.containerName === 'React');\n    },\n    // Give errors about disallowed imports such as `useState`.\n    getSemanticDiagnosticsForImportDeclaration (source, node) {\n        const ts = getTs();\n        const diagnostics = [];\n        const importPath = node.moduleSpecifier.getText(source);\n        const importClause = node.importClause;\n        const namedBindings = importClause == null ? void 0 : importClause.namedBindings;\n        if (importClause) {\n            if (/^['\"]react['\"]$/.test(importPath)) {\n                // Check if it imports \"useState\"\n                if (namedBindings && ts.isNamedImports(namedBindings)) {\n                    const elements = namedBindings.elements;\n                    for (const element of elements){\n                        const name = element.name.getText(source);\n                        if (DISALLOWED_SERVER_REACT_APIS.includes(name)) {\n                            diagnostics.push({\n                                file: source,\n                                category: ts.DiagnosticCategory.Error,\n                                code: NEXT_TS_ERRORS.INVALID_SERVER_API,\n                                messageText: `\"${name}\" is not allowed in Server Components.`,\n                                start: element.name.getStart(),\n                                length: element.name.getWidth()\n                            });\n                        }\n                    }\n                }\n            } else if (/^['\"]react-dom['\"]$/.test(importPath)) {\n                // Check if it imports \"useFormState\"\n                if (namedBindings && ts.isNamedImports(namedBindings)) {\n                    const elements = namedBindings.elements;\n                    for (const element of elements){\n                        const name = element.name.getText(source);\n                        if (DISALLOWED_SERVER_REACT_DOM_APIS.includes(name)) {\n                            diagnostics.push({\n                                file: source,\n                                category: ts.DiagnosticCategory.Error,\n                                code: NEXT_TS_ERRORS.INVALID_SERVER_API,\n                                messageText: `\"${name}\" is not allowed in Server Components.`,\n                                start: element.name.getStart(),\n                                length: element.name.getWidth()\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        return diagnostics;\n    }\n};\nexport default serverLayer;\n\n//# sourceMappingURL=server.js.map"
        }
    ]
}