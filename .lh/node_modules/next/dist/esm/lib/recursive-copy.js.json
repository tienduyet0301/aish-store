{
    "sourceFile": "node_modules/next/dist/esm/lib/recursive-copy.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746892816372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "import path from 'path';\nimport { promises, constants } from 'fs';\nimport { Sema } from 'next/dist/compiled/async-sema';\nimport isError from './is-error';\nconst COPYFILE_EXCL = constants.COPYFILE_EXCL;\nexport async function recursiveCopy(source, dest, { concurrency = 32, overwrite = false, filter = ()=>true } = {}) {\n    const cwdPath = process.cwd();\n    const from = path.resolve(cwdPath, source);\n    const to = path.resolve(cwdPath, dest);\n    const sema = new Sema(concurrency);\n    // deep copy the file/directory\n    async function _copy(item, lstats) {\n        const target = item.replace(from, to);\n        await sema.acquire();\n        if (!lstats) {\n            // after lock on first run\n            lstats = await promises.lstat(from);\n        }\n        // readdir & lstat do not follow symbolic links\n        // if part is a symbolic link, follow it with stat\n        let isFile = lstats.isFile();\n        let isDirectory = lstats.isDirectory();\n        if (lstats.isSymbolicLink()) {\n            const stats = await promises.stat(item);\n            isFile = stats.isFile();\n            isDirectory = stats.isDirectory();\n        }\n        if (isDirectory) {\n            try {\n                await promises.mkdir(target, {\n                    recursive: true\n                });\n            } catch (err) {\n                // do not throw `folder already exists` errors\n                if (isError(err) && err.code !== 'EEXIST') {\n                    throw err;\n                }\n            }\n            sema.release();\n            const files = await promises.readdir(item, {\n                withFileTypes: true\n            });\n            await Promise.all(files.map((file)=>_copy(path.join(item, file.name), file)));\n        } else if (isFile && // before we send the path to filter\n        // we remove the base path (from) and replace \\ by / (windows)\n        filter(item.replace(from, '').replace(/\\\\/g, '/'))) {\n            await promises.copyFile(item, target, overwrite ? undefined : COPYFILE_EXCL).catch((err)=>{\n                // if overwrite is false we shouldn't fail on EEXIST\n                if (err.code !== 'EEXIST') {\n                    throw err;\n                }\n            });\n            sema.release();\n        } else {\n            sema.release();\n        }\n    }\n    await _copy(from);\n}\n\n//# sourceMappingURL=recursive-copy.js.map"
        }
    ]
}