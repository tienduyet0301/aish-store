{
    "sourceFile": "src/components/BannerClientComponent.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1750476985213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1750476997829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,15 +7,33 @@\n \r\n const DEFAULT_BANNER_IMAGE = \"/images/image1.jpg\";\r\n const SCROLL_ANIMATION_DURATION = 700;\r\n \r\n-function easeInOutCubic(t) {\r\n+// Type definitions\r\n+interface Banner {\r\n+  _id: string;\r\n+  imageUrl: string;\r\n+  title?: string;\r\n+  isMobile: boolean;\r\n+  blurDataURL?: string;\r\n+}\r\n+\r\n+interface BannerItemProps {\r\n+  banner: Banner;\r\n+  idx: number;\r\n+}\r\n+\r\n+interface BannerClientComponentProps {\r\n+  initialBanners: Banner[];\r\n+}\r\n+\r\n+function easeInOutCubic(t: number) {\r\n   return t < 0.5\r\n     ? 4 * t * t * t\r\n     : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n }\r\n \r\n-const BannerItem = React.memo(({ banner, idx }) => (\r\n+const BannerItem = React.memo(({ banner, idx }: BannerItemProps) => (\r\n   <div\r\n     key={banner._id || idx}\r\n     className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden\"\r\n   >\r\n@@ -45,17 +63,17 @@\n ));\r\n BannerItem.displayName = 'BannerItem';\r\n \r\n \r\n-export default function BannerClientComponent({ initialBanners }) {\r\n+export default function BannerClientComponent({ initialBanners }: BannerClientComponentProps) {\r\n   const [currentImage, setCurrentImage] = useState(0);\r\n   const [banners, setBanners] = useState(initialBanners);\r\n   const [isScrolling, setIsScrolling] = useState(false);\r\n   const router = useRouter();\r\n \r\n   // Scroll handler\r\n   const handleScroll = useCallback(\r\n-    (e) => {\r\n+    (e: WheelEvent) => {\r\n       if (isScrolling || banners.length < 2) return;\r\n       \r\n       e.preventDefault();\r\n       \r\n@@ -73,9 +91,9 @@\n       const start = window.scrollY;\r\n       const end = newIdx * winH;\r\n       const startTime = performance.now();\r\n \r\n-      function animateScroll(now) {\r\n+      function animateScroll(now: number) {\r\n         const elapsed = now - startTime;\r\n         const progress = Math.min(elapsed / SCROLL_ANIMATION_DURATION, 1);\r\n         window.scrollTo(0, start + (end - start) * easeInOutCubic(progress));\r\n         if (progress < 1) {\r\n@@ -94,17 +112,17 @@\n   useEffect(() => {\r\n     // Set scroll to top on mount\r\n     window.scrollTo(0, 0);\r\n \r\n-    const debouncedScroll = (e) => {\r\n+    const debouncedScroll = (e: WheelEvent) => {\r\n         // Simple debounce, main logic is in handleScroll\r\n         if (!isScrolling) {\r\n             handleScroll(e);\r\n         }\r\n     };\r\n \r\n-    window.addEventListener(\"wheel\", debouncedScroll, { passive: false });\r\n-    return () => window.removeEventListener(\"wheel\", debouncedScroll);\r\n+    window.addEventListener(\"wheel\", debouncedScroll as EventListener, { passive: false });\r\n+    return () => window.removeEventListener(\"wheel\", debouncedScroll as EventListener);\r\n   }, [handleScroll, isScrolling]);\r\n \r\n \r\n   // Memoize banner items to prevent unnecessary re-renders\r\n"
                },
                {
                    "date": 1750477999563,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,174 +1,1 @@\n-\"use client\";\r\n-import { useState, useEffect, useCallback, useMemo } from \"react\";\r\n-import { useRouter } from \"next/navigation\";\r\n-import { motion } from \"framer-motion\";\r\n-import Image from \"next/image\";\r\n-import React from \"react\";\r\n-\r\n-const DEFAULT_BANNER_IMAGE = \"/images/image1.jpg\";\r\n-const SCROLL_ANIMATION_DURATION = 700;\r\n-\r\n-// Type definitions\r\n-interface Banner {\r\n-  _id: string;\r\n-  imageUrl: string;\r\n-  title?: string;\r\n-  isMobile: boolean;\r\n-  blurDataURL?: string;\r\n-}\r\n-\r\n-interface BannerItemProps {\r\n-  banner: Banner;\r\n-  idx: number;\r\n-}\r\n-\r\n-interface BannerClientComponentProps {\r\n-  initialBanners: Banner[];\r\n-}\r\n-\r\n-function easeInOutCubic(t: number) {\r\n-  return t < 0.5\r\n-    ? 4 * t * t * t\r\n-    : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n-}\r\n-\r\n-const BannerItem = React.memo(({ banner, idx }: BannerItemProps) => (\r\n-  <div\r\n-    key={banner._id || idx}\r\n-    className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden\"\r\n-  >\r\n-    <div className=\"relative w-full h-full flex items-center justify-center bg-black m-0 p-0\">\r\n-      <Image\r\n-        src={banner.imageUrl}\r\n-        alt={banner.title || `Banner ${idx + 1}`}\r\n-        fill\r\n-        className=\"object-cover\"\r\n-        priority={idx === 0} // Only prioritize the first image\r\n-        loading={idx === 0 ? \"eager\" : \"lazy\"} // Eager load the first, lazy load the rest\r\n-        sizes=\"100vw\"\r\n-        quality={90}\r\n-        placeholder=\"blur\"\r\n-        blurDataURL={banner.blurDataURL || \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"}\r\n-        style={{\r\n-          objectFit: 'cover',\r\n-          objectPosition: 'center',\r\n-          willChange: 'transform',\r\n-        }}\r\n-        onError={(e) => {\r\n-          e.currentTarget.src = DEFAULT_BANNER_IMAGE;\r\n-        }}\r\n-      />\r\n-    </div>\r\n-  </div>\r\n-));\r\n-BannerItem.displayName = 'BannerItem';\r\n-\r\n-\r\n-export default function BannerClientComponent({ initialBanners }: BannerClientComponentProps) {\r\n-  const [currentImage, setCurrentImage] = useState(0);\r\n-  const [banners, setBanners] = useState(initialBanners);\r\n-  const [isScrolling, setIsScrolling] = useState(false);\r\n-  const router = useRouter();\r\n-\r\n-  // Scroll handler\r\n-  const handleScroll = useCallback(\r\n-    (e: WheelEvent) => {\r\n-      if (isScrolling || banners.length < 2) return;\r\n-      \r\n-      e.preventDefault();\r\n-      \r\n-      const delta = Math.sign(e.deltaY);\r\n-      const newIdx = currentImage + delta;\r\n-\r\n-      if (newIdx < 0 || newIdx >= banners.length) {\r\n-        return;\r\n-      }\r\n-      \r\n-      setIsScrolling(true);\r\n-      setCurrentImage(newIdx);\r\n-\r\n-      const winH = window.innerHeight;\r\n-      const start = window.scrollY;\r\n-      const end = newIdx * winH;\r\n-      const startTime = performance.now();\r\n-\r\n-      function animateScroll(now: number) {\r\n-        const elapsed = now - startTime;\r\n-        const progress = Math.min(elapsed / SCROLL_ANIMATION_DURATION, 1);\r\n-        window.scrollTo(0, start + (end - start) * easeInOutCubic(progress));\r\n-        if (progress < 1) {\r\n-          requestAnimationFrame(animateScroll);\r\n-        } else {\r\n-          // A short delay to prevent immediate re-triggering\r\n-          setTimeout(() => setIsScrolling(false), 100); \r\n-        }\r\n-      }\r\n-      requestAnimationFrame(animateScroll);\r\n-    },\r\n-    [banners.length, currentImage, isScrolling]\r\n-  );\r\n-  \r\n-  // Attach scroll listener\r\n-  useEffect(() => {\r\n-    // Set scroll to top on mount\r\n-    window.scrollTo(0, 0);\r\n-\r\n-    const debouncedScroll = (e: WheelEvent) => {\r\n-        // Simple debounce, main logic is in handleScroll\r\n-        if (!isScrolling) {\r\n-            handleScroll(e);\r\n-        }\r\n-    };\r\n-\r\n-    window.addEventListener(\"wheel\", debouncedScroll as EventListener, { passive: false });\r\n-    return () => window.removeEventListener(\"wheel\", debouncedScroll as EventListener);\r\n-  }, [handleScroll, isScrolling]);\r\n-\r\n-\r\n-  // Memoize banner items to prevent unnecessary re-renders\r\n-  const bannerItems = useMemo(() => {\r\n-    return banners.map((banner, idx) => (\r\n-      <BannerItem\r\n-        key={banner._id || idx}\r\n-        banner={banner}\r\n-        idx={idx}\r\n-      />\r\n-    ));\r\n-  }, [banners]);\r\n-  \r\n-  if (!banners || banners.length === 0) {\r\n-    return (\r\n-       <div className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden bg-black\">\r\n-          <div className=\"text-white text-center\">\r\n-              <h2 className=\"text-2xl font-bold mb-4\">Welcome to AISH</h2>\r\n-              <p>No active banners at the moment. Please check back later.</p>\r\n-          </div>\r\n-       </div>\r\n-    );\r\n-  }\r\n-\r\n-  return (\r\n-    <div className=\"relative w-full bg-black overflow-hidden\">\r\n-        <div className=\"flex flex-col\" style={{ height: `${banners.length * 100}vh` }}>\r\n-            <div className=\"sticky top-0 h-screen\">\r\n-                 {bannerItems[currentImage]}\r\n-            </div>\r\n-        </div>\r\n-\r\n-      {/* SHOP NOW text */}\r\n-      <motion.div\r\n-        initial={{ opacity: 0, y: 20 }}\r\n-        animate={{ opacity: 1, y: 0 }}\r\n-        whileHover={{ scale: 1.05 }}\r\n-        className=\"fixed top-24 left-8 z-20\"\r\n-      >\r\n-        <button\r\n-          onClick={() => router.push(\"/products\")}\r\n-          className=\"bg-white text-black px-4 py-1.5 md:px-6 md:py-2 text-xs md:text-sm font-semibold hover:bg-black hover:text-white transition-all duration-300\"\r\n-        >\r\n-          SHOP NOW\r\n-        </button>\r\n-      </motion.div>\r\n-    </div>\r\n-  );\r\n-} \n\\ No newline at end of file\n+ \n\\ No newline at end of file\n"
                },
                {
                    "date": 1750478492130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,157 @@\n- \n\\ No newline at end of file\n+\"use client\";\r\n+import { useState, useEffect, useCallback, useMemo } from \"react\";\r\n+import { useRouter } from \"next/navigation\";\r\n+import { motion } from \"framer-motion\";\r\n+import Image from \"next/image\";\r\n+import React from \"react\";\r\n+\r\n+const DEFAULT_BANNER_IMAGE = \"/images/image1.jpg\";\r\n+const SCROLL_ANIMATION_DURATION = 700;\r\n+\r\n+// Type definitions\r\n+interface Banner {\r\n+  _id: string;\r\n+  imageUrl: string;\r\n+  title?: string;\r\n+  isMobile: boolean;\r\n+  blurDataURL?: string;\r\n+}\r\n+\r\n+interface BannerItemProps {\r\n+  banner: Banner;\r\n+  idx: number;\r\n+}\r\n+\r\n+interface BannerClientComponentProps {\r\n+  initialBanners: Banner[];\r\n+}\r\n+\r\n+function easeInOutCubic(t: number) {\r\n+  return t < 0.5\r\n+    ? 4 * t * t * t\r\n+    : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n+}\r\n+\r\n+const BannerItem = React.memo(({ banner, idx }: BannerItemProps) => (\r\n+  <div\r\n+    key={banner._id || idx}\r\n+    className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden\"\r\n+  >\r\n+    <div className=\"relative w-full h-full flex items-center justify-center bg-black m-0 p-0\">\r\n+      <Image\r\n+        src={banner.imageUrl}\r\n+        alt={banner.title || `Banner ${idx + 1}`}\r\n+        fill\r\n+        className=\"object-cover\"\r\n+        priority={idx === 0}\r\n+        loading={idx === 0 ? \"eager\" : \"lazy\"}\r\n+        sizes=\"100vw\"\r\n+        quality={90}\r\n+        placeholder=\"blur\"\r\n+        blurDataURL={banner.blurDataURL || \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"}\r\n+        style={{\r\n+          objectFit: 'cover',\r\n+          objectPosition: 'center',\r\n+          willChange: 'transform',\r\n+        }}\r\n+        onError={(e) => {\r\n+          e.currentTarget.src = DEFAULT_BANNER_IMAGE;\r\n+        }}\r\n+      />\r\n+    </div>\r\n+  </div>\r\n+));\r\n+BannerItem.displayName = 'BannerItem';\r\n+\r\n+\r\n+export default function BannerClientComponent({ initialBanners }: BannerClientComponentProps) {\r\n+  const [currentImage, setCurrentImage] = useState(0);\r\n+  const [banners] = useState(initialBanners);\r\n+  const [isScrolling, setIsScrolling] = useState(false);\r\n+  const router = useRouter();\r\n+\r\n+  const handleScroll = useCallback((e: WheelEvent) => {\r\n+      if (isScrolling || banners.length < 2) return;\r\n+      \r\n+      e.preventDefault();\r\n+      \r\n+      const delta = Math.sign(e.deltaY);\r\n+      const newIdx = currentImage + delta;\r\n+\r\n+      if (newIdx < 0 || newIdx >= banners.length) {\r\n+        return;\r\n+      }\r\n+      \r\n+      setIsScrolling(true);\r\n+      \r\n+      const targetElement = document.getElementById(`banner-section-${newIdx}`);\r\n+      if (targetElement) {\r\n+          targetElement.scrollIntoView({ behavior: 'smooth' });\r\n+      }\r\n+\r\n+      // We need a way to know when scrolling is finished to set isScrolling to false.\r\n+      // A timeout is a simple way, but IntersectionObserver would be more robust.\r\n+      setTimeout(() => {\r\n+          setCurrentImage(newIdx);\r\n+          setIsScrolling(false)\r\n+      }, SCROLL_ANIMATION_DURATION + 100); // Allow some buffer\r\n+      \r\n+    }, [banners.length, currentImage, isScrolling]);\r\n+  \r\n+  useEffect(() => {\r\n+    const handleWheel = (e: WheelEvent) => {\r\n+        if(!isScrolling) {\r\n+            handleScroll(e);\r\n+        } else {\r\n+            e.preventDefault();\r\n+        }\r\n+    }\r\n+    window.addEventListener(\"wheel\", handleWheel, { passive: false });\r\n+    return () => window.removeEventListener(\"wheel\", handleWheel);\r\n+  }, [handleScroll, isScrolling]);\r\n+\r\n+  const bannerItems = useMemo(() => {\r\n+    return banners.map((banner, idx) => (\r\n+        <section\r\n+            id={`banner-section-${idx}`}\r\n+            key={banner._id || idx}\r\n+            className=\"h-screen w-full snap-start\"\r\n+        >\r\n+            <BannerItem\r\n+                banner={banner}\r\n+                idx={idx}\r\n+            />\r\n+        </section>\r\n+    ));\r\n+  }, [banners]);\r\n+  \r\n+  if (!banners || banners.length === 0) {\r\n+    return (\r\n+       <div className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden bg-black\">\r\n+          <div className=\"text-white text-center\">\r\n+              <h2 className=\"text-2xl font-bold mb-4\">Welcome to AISH</h2>\r\n+              <p>No active banners at the moment. Please check back later.</p>\r\n+          </div>\r\n+       </div>\r\n+    );\r\n+  }\r\n+\r\n+  return (\r\n+    <div className=\"relative w-full bg-black overflow-hidden snap-y snap-mandatory h-screen\">\r\n+      {bannerItems}\r\n+      <motion.div\r\n+        initial={{ opacity: 0, y: 20 }}\r\n+        animate={{ opacity: 1, y: 0 }}\r\n+        whileHover={{ scale: 1.05 }}\r\n+        className=\"fixed top-24 left-8 z-20\"\r\n+      >\r\n+        <button\r\n+          onClick={() => router.push(\"/products\")}\r\n+          className=\"bg-white text-black px-4 py-1.5 md:px-6 md:py-2 text-xs md:text-sm font-semibold hover:bg-black hover:text-white transition-all duration-300\"\r\n+        >\r\n+          SHOP NOW\r\n+        </button>\r\n+      </motion.div>\r\n+    </div>\r\n+  );\r\n+} \n\\ No newline at end of file\n"
                },
                {
                    "date": 1750478812330,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,157 +1,1 @@\n-\"use client\";\r\n-import { useState, useEffect, useCallback, useMemo } from \"react\";\r\n-import { useRouter } from \"next/navigation\";\r\n-import { motion } from \"framer-motion\";\r\n-import Image from \"next/image\";\r\n-import React from \"react\";\r\n-\r\n-const DEFAULT_BANNER_IMAGE = \"/images/image1.jpg\";\r\n-const SCROLL_ANIMATION_DURATION = 700;\r\n-\r\n-// Type definitions\r\n-interface Banner {\r\n-  _id: string;\r\n-  imageUrl: string;\r\n-  title?: string;\r\n-  isMobile: boolean;\r\n-  blurDataURL?: string;\r\n-}\r\n-\r\n-interface BannerItemProps {\r\n-  banner: Banner;\r\n-  idx: number;\r\n-}\r\n-\r\n-interface BannerClientComponentProps {\r\n-  initialBanners: Banner[];\r\n-}\r\n-\r\n-function easeInOutCubic(t: number) {\r\n-  return t < 0.5\r\n-    ? 4 * t * t * t\r\n-    : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n-}\r\n-\r\n-const BannerItem = React.memo(({ banner, idx }: BannerItemProps) => (\r\n-  <div\r\n-    key={banner._id || idx}\r\n-    className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden\"\r\n-  >\r\n-    <div className=\"relative w-full h-full flex items-center justify-center bg-black m-0 p-0\">\r\n-      <Image\r\n-        src={banner.imageUrl}\r\n-        alt={banner.title || `Banner ${idx + 1}`}\r\n-        fill\r\n-        className=\"object-cover\"\r\n-        priority={idx === 0}\r\n-        loading={idx === 0 ? \"eager\" : \"lazy\"}\r\n-        sizes=\"100vw\"\r\n-        quality={90}\r\n-        placeholder=\"blur\"\r\n-        blurDataURL={banner.blurDataURL || \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"}\r\n-        style={{\r\n-          objectFit: 'cover',\r\n-          objectPosition: 'center',\r\n-          willChange: 'transform',\r\n-        }}\r\n-        onError={(e) => {\r\n-          e.currentTarget.src = DEFAULT_BANNER_IMAGE;\r\n-        }}\r\n-      />\r\n-    </div>\r\n-  </div>\r\n-));\r\n-BannerItem.displayName = 'BannerItem';\r\n-\r\n-\r\n-export default function BannerClientComponent({ initialBanners }: BannerClientComponentProps) {\r\n-  const [currentImage, setCurrentImage] = useState(0);\r\n-  const [banners] = useState(initialBanners);\r\n-  const [isScrolling, setIsScrolling] = useState(false);\r\n-  const router = useRouter();\r\n-\r\n-  const handleScroll = useCallback((e: WheelEvent) => {\r\n-      if (isScrolling || banners.length < 2) return;\r\n-      \r\n-      e.preventDefault();\r\n-      \r\n-      const delta = Math.sign(e.deltaY);\r\n-      const newIdx = currentImage + delta;\r\n-\r\n-      if (newIdx < 0 || newIdx >= banners.length) {\r\n-        return;\r\n-      }\r\n-      \r\n-      setIsScrolling(true);\r\n-      \r\n-      const targetElement = document.getElementById(`banner-section-${newIdx}`);\r\n-      if (targetElement) {\r\n-          targetElement.scrollIntoView({ behavior: 'smooth' });\r\n-      }\r\n-\r\n-      // We need a way to know when scrolling is finished to set isScrolling to false.\r\n-      // A timeout is a simple way, but IntersectionObserver would be more robust.\r\n-      setTimeout(() => {\r\n-          setCurrentImage(newIdx);\r\n-          setIsScrolling(false)\r\n-      }, SCROLL_ANIMATION_DURATION + 100); // Allow some buffer\r\n-      \r\n-    }, [banners.length, currentImage, isScrolling]);\r\n-  \r\n-  useEffect(() => {\r\n-    const handleWheel = (e: WheelEvent) => {\r\n-        if(!isScrolling) {\r\n-            handleScroll(e);\r\n-        } else {\r\n-            e.preventDefault();\r\n-        }\r\n-    }\r\n-    window.addEventListener(\"wheel\", handleWheel, { passive: false });\r\n-    return () => window.removeEventListener(\"wheel\", handleWheel);\r\n-  }, [handleScroll, isScrolling]);\r\n-\r\n-  const bannerItems = useMemo(() => {\r\n-    return banners.map((banner, idx) => (\r\n-        <section\r\n-            id={`banner-section-${idx}`}\r\n-            key={banner._id || idx}\r\n-            className=\"h-screen w-full snap-start\"\r\n-        >\r\n-            <BannerItem\r\n-                banner={banner}\r\n-                idx={idx}\r\n-            />\r\n-        </section>\r\n-    ));\r\n-  }, [banners]);\r\n-  \r\n-  if (!banners || banners.length === 0) {\r\n-    return (\r\n-       <div className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden bg-black\">\r\n-          <div className=\"text-white text-center\">\r\n-              <h2 className=\"text-2xl font-bold mb-4\">Welcome to AISH</h2>\r\n-              <p>No active banners at the moment. Please check back later.</p>\r\n-          </div>\r\n-       </div>\r\n-    );\r\n-  }\r\n-\r\n-  return (\r\n-    <div className=\"relative w-full bg-black overflow-hidden snap-y snap-mandatory h-screen\">\r\n-      {bannerItems}\r\n-      <motion.div\r\n-        initial={{ opacity: 0, y: 20 }}\r\n-        animate={{ opacity: 1, y: 0 }}\r\n-        whileHover={{ scale: 1.05 }}\r\n-        className=\"fixed top-24 left-8 z-20\"\r\n-      >\r\n-        <button\r\n-          onClick={() => router.push(\"/products\")}\r\n-          className=\"bg-white text-black px-4 py-1.5 md:px-6 md:py-2 text-xs md:text-sm font-semibold hover:bg-black hover:text-white transition-all duration-300\"\r\n-        >\r\n-          SHOP NOW\r\n-        </button>\r\n-      </motion.div>\r\n-    </div>\r\n-  );\r\n-} \n\\ No newline at end of file\n+ \n\\ No newline at end of file\n"
                },
                {
                    "date": 1750479065561,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,183 @@\n- \n\\ No newline at end of file\n+\"use client\";\r\n+import { useState, useEffect, useCallback, useMemo } from \"react\";\r\n+import { useRouter } from \"next/navigation\";\r\n+import { motion } from \"framer-motion\";\r\n+import Image from \"next/image\";\r\n+import React from \"react\";\r\n+import Head from 'next/head';\r\n+\r\n+// Type definitions\r\n+interface Banner {\r\n+  _id: string;\r\n+  imageUrl: string;\r\n+  title?: string;\r\n+  isMobile: boolean;\r\n+  blurDataURL?: string;\r\n+}\r\n+\r\n+interface BannerItemProps {\r\n+  banner: Banner;\r\n+  idx: number;\r\n+}\r\n+\r\n+interface BannerClientComponentProps {\r\n+  initialBanners: Banner[];\r\n+}\r\n+\r\n+\r\n+const DEFAULT_BANNER_IMAGE = \"/images/image1.jpg\";\r\n+const SCROLL_ANIMATION_DURATION = 700;\r\n+\r\n+function easeInOutCubic(t: number) {\r\n+  return t < 0.5\r\n+    ? 4 * t * t * t\r\n+    : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n+}\r\n+\r\n+const BannerItem = React.memo(({ banner, idx }: BannerItemProps) => (\r\n+  <div\r\n+    key={banner._id || idx}\r\n+    className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden\"\r\n+  >\r\n+    <div className=\"relative w-full h-full flex items-center justify-center bg-black m-0 p-0\">\r\n+      <Image\r\n+        src={banner.imageUrl}\r\n+        alt={banner.title || `Banner ${idx + 1}`}\r\n+        fill\r\n+        className=\"object-cover\"\r\n+        priority={idx === 0} // Prioritize first image\r\n+        loading={idx === 0 ? \"eager\" : \"lazy\"} // Eager load first, lazy the rest\r\n+        sizes=\"100vw\"\r\n+        quality={90}\r\n+        placeholder=\"blur\"\r\n+        blurDataURL={banner.blurDataURL || \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"}\r\n+        style={{\r\n+          objectFit: 'cover',\r\n+          objectPosition: 'center',\r\n+          willChange: 'transform',\r\n+        }}\r\n+        onError={(e) => {\r\n+          (e.target as HTMLImageElement).src = DEFAULT_BANNER_IMAGE;\r\n+        }}\r\n+      />\r\n+    </div>\r\n+  </div>\r\n+));\r\n+BannerItem.displayName = 'BannerItem';\r\n+\r\n+\r\n+export default function BannerClientComponent({ initialBanners }: BannerClientComponentProps) {\r\n+  const [currentImage, setCurrentImage] = useState(0);\r\n+  const [banners] = useState(initialBanners); // Receive banners as prop\r\n+  const [isScrolling, setIsScrolling] = useState(false);\r\n+  const router = useRouter();\r\n+\r\n+  // Preload images - This logic is preserved\r\n+  useEffect(() => {\r\n+    const preloadImages = (urls: string[]) => {\r\n+      urls.forEach(url => {\r\n+        const img = new (window as any).Image();\r\n+        img.src = url;\r\n+      });\r\n+    };\r\n+\r\n+    if (banners.length > 0) {\r\n+      preloadImages(banners.map(b => b.imageUrl));\r\n+    }\r\n+  }, [banners]);\r\n+\r\n+  // Scroll handler - This logic is IDENTICAL to the original page.js\r\n+  const handleScroll = useCallback(\r\n+    (e: WheelEvent) => {\r\n+      if (banners.length < 2) return;\r\n+      const scrollY = window.scrollY;\r\n+      const winH = window.innerHeight;\r\n+      const imageIdx = Math.floor(scrollY / winH);\r\n+      if (imageIdx === banners.length - 1 && e.deltaY > 0) return;\r\n+      e.preventDefault();\r\n+      if (isScrolling) return;\r\n+      const delta = Math.sign(e.deltaY);\r\n+      const newIdx = Math.max(0, Math.min(banners.length - 1, imageIdx + delta));\r\n+      if (newIdx === currentImage) return;\r\n+      setIsScrolling(true);\r\n+      setCurrentImage(newIdx);\r\n+      const start = scrollY;\r\n+      const end = newIdx * winH;\r\n+      const startTime = performance.now();\r\n+      function animateScroll(now: number) {\r\n+        const elapsed = now - startTime;\r\n+        const progress = Math.min(elapsed / SCROLL_ANIMATION_DURATION, 1);\r\n+        window.scrollTo(0, start + (end - start) * easeInOutCubic(progress));\r\n+        if (progress < 1) {\r\n+          requestAnimationFrame(animateScroll);\r\n+        } else {\r\n+          setIsScrolling(false);\r\n+        }\r\n+      }\r\n+      requestAnimationFrame(animateScroll);\r\n+    },\r\n+    [banners.length, currentImage, isScrolling]\r\n+  );\r\n+\r\n+  useEffect(() => {\r\n+    window.addEventListener(\"wheel\", handleScroll as EventListener, { passive: false });\r\n+    return () => window.removeEventListener(\"wheel\", handleScroll as EventListener);\r\n+  }, [handleScroll]);\r\n+\r\n+  // Memoize banner items to prevent unnecessary re-renders\r\n+  const bannerItems = useMemo(() => {\r\n+    return banners.map((banner, idx) => (\r\n+      <BannerItem\r\n+        key={banner._id || idx}\r\n+        banner={banner}\r\n+        idx={idx}\r\n+      />\r\n+    ));\r\n+  }, [banners]);\r\n+\r\n+  if (!banners || banners.length === 0) {\r\n+    return (\r\n+       <div className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden bg-black\">\r\n+          <div className=\"text-white text-center\">\r\n+              <h2 className=\"text-2xl font-bold mb-4\">Welcome to AISH</h2>\r\n+              <p>No active banners at the moment. Please check back later.</p>\r\n+          </div>\r\n+       </div>\r\n+    );\r\n+  }\r\n+\r\n+  return (\r\n+    <>\r\n+      <Head>\r\n+        {banners.map((banner, idx) => (\r\n+          <link\r\n+            key={banner._id || idx}\r\n+            rel=\"preload\"\r\n+            href={banner.imageUrl}\r\n+            as=\"image\"\r\n+          />\r\n+        ))}\r\n+      </Head>\r\n+      <div className=\"relative w-full bg-black overflow-hidden\">\r\n+        <div className=\"flex flex-col\">\r\n+          {bannerItems}\r\n+        </div>\r\n+\r\n+        {/* SHOP NOW text */}\r\n+        <motion.div\r\n+          initial={{ opacity: 0, y: 20 }}\r\n+          animate={{ opacity: 1, y: 0 }}\r\n+          whileHover={{ scale: 1.05 }}\r\n+          className=\"fixed top-24 left-8 z-20\"\r\n+        >\r\n+          <button\r\n+            onClick={() => router.push(\"/products\")}\r\n+            className=\"bg-white text-black px-4 py-1.5 md:px-6 md:py-2 text-xs md:text-sm font-semibold hover:bg-black hover:text-white transition-all duration-300\"\r\n+          >\r\n+            SHOP NOW\r\n+          </button>\r\n+        </motion.div>\r\n+      </div>\r\n+    </>\r\n+  );\r\n+} \n\\ No newline at end of file\n"
                },
                {
                    "date": 1750479559853,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n interface Banner {\r\n   _id: string;\r\n   imageUrl: string;\r\n   title?: string;\r\n-  isMobile: boolean;\r\n+  isMobile?: boolean; // isMobile is now optional as it's determined on the client\r\n   blurDataURL?: string;\r\n }\r\n \r\n interface BannerItemProps {\r\n@@ -23,9 +23,8 @@\n interface BannerClientComponentProps {\r\n   initialBanners: Banner[];\r\n }\r\n \r\n-\r\n const DEFAULT_BANNER_IMAGE = \"/images/image1.jpg\";\r\n const SCROLL_ANIMATION_DURATION = 700;\r\n \r\n function easeInOutCubic(t: number) {\r\n@@ -44,14 +43,12 @@\n         src={banner.imageUrl}\r\n         alt={banner.title || `Banner ${idx + 1}`}\r\n         fill\r\n         className=\"object-cover\"\r\n-        priority={idx === 0} // Prioritize first image\r\n-        loading={idx === 0 ? \"eager\" : \"lazy\"} // Eager load first, lazy the rest\r\n+        priority={idx === 0}\r\n+        loading={idx === 0 ? \"eager\" : \"lazy\"}\r\n         sizes=\"100vw\"\r\n         quality={90}\r\n-        placeholder=\"blur\"\r\n-        blurDataURL={banner.blurDataURL || \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"}\r\n         style={{\r\n           objectFit: 'cover',\r\n           objectPosition: 'center',\r\n           willChange: 'transform',\r\n@@ -64,41 +61,68 @@\n   </div>\r\n ));\r\n BannerItem.displayName = 'BannerItem';\r\n \r\n-\r\n export default function BannerClientComponent({ initialBanners }: BannerClientComponentProps) {\r\n   const [currentImage, setCurrentImage] = useState(0);\r\n-  const [banners] = useState(initialBanners); // Receive banners as prop\r\n+  const [banners, setBanners] = useState<Banner[]>([]); // This will hold the processed banners\r\n   const [isScrolling, setIsScrolling] = useState(false);\r\n+  const [isMobileDevice, setIsMobileDevice] = useState(false);\r\n   const router = useRouter();\r\n \r\n-  // Preload images - This logic is preserved\r\n+  // Re-implement the original logic to determine if a banner is for mobile\r\n   useEffect(() => {\r\n-    const preloadImages = (urls: string[]) => {\r\n-      urls.forEach(url => {\r\n-        const img = new (window as any).Image();\r\n-        img.src = url;\r\n-      });\r\n-    };\r\n+    let ignore = false;\r\n+    const processBanners = async () => {\r\n+        const processed = await Promise.all(initialBanners.map(async (banner) => {\r\n+            const isMobile = await new Promise<boolean>((resolve) => {\r\n+              const img = new (window as any).Image();\r\n+              img.onload = () => resolve(img.height > img.width);\r\n+              img.onerror = () => resolve(false); // Default to not mobile on error\r\n+              img.src = banner.imageUrl;\r\n+            });\r\n+            return { ...banner, isMobile };\r\n+        }));\r\n \r\n-    if (banners.length > 0) {\r\n-      preloadImages(banners.map(b => b.imageUrl));\r\n+        if (!ignore) {\r\n+            setBanners(processed);\r\n+        }\r\n     }\r\n-  }, [banners]);\r\n+    \r\n+    if (initialBanners.length > 0) {\r\n+        processBanners();\r\n+    }\r\n \r\n+    return () => { ignore = true; };\r\n+  }, [initialBanners]);\r\n+\r\n+  // Re-implement the original logic to check device type\r\n+  useEffect(() => {\r\n+    const checkMobile = () => {\r\n+      setIsMobileDevice(window.innerWidth < 768);\r\n+    };\r\n+    checkMobile();\r\n+    window.addEventListener('resize', checkMobile);\r\n+    return () => window.removeEventListener('resize', checkMobile);\r\n+  }, []);\r\n+\r\n+  // Re-implement the original logic to filter banners\r\n+  const filteredBanners = useMemo(() => {\r\n+    return banners.filter(banner => banner.isMobile === isMobileDevice);\r\n+  }, [banners, isMobileDevice]);\r\n+\r\n   // Scroll handler - This logic is IDENTICAL to the original page.js\r\n   const handleScroll = useCallback(\r\n     (e: WheelEvent) => {\r\n-      if (banners.length < 2) return;\r\n+      if (filteredBanners.length < 2) return;\r\n       const scrollY = window.scrollY;\r\n       const winH = window.innerHeight;\r\n       const imageIdx = Math.floor(scrollY / winH);\r\n-      if (imageIdx === banners.length - 1 && e.deltaY > 0) return;\r\n+      if (imageIdx === filteredBanners.length - 1 && e.deltaY > 0) return;\r\n       e.preventDefault();\r\n       if (isScrolling) return;\r\n       const delta = Math.sign(e.deltaY);\r\n-      const newIdx = Math.max(0, Math.min(banners.length - 1, imageIdx + delta));\r\n+      const newIdx = Math.max(0, Math.min(filteredBanners.length - 1, imageIdx + delta));\r\n       if (newIdx === currentImage) return;\r\n       setIsScrolling(true);\r\n       setCurrentImage(newIdx);\r\n       const start = scrollY;\r\n@@ -115,9 +139,9 @@\n         }\r\n       }\r\n       requestAnimationFrame(animateScroll);\r\n     },\r\n-    [banners.length, currentImage, isScrolling]\r\n+    [filteredBanners.length, currentImage, isScrolling]\r\n   );\r\n \r\n   useEffect(() => {\r\n     window.addEventListener(\"wheel\", handleScroll as EventListener, { passive: false });\r\n@@ -125,32 +149,41 @@\n   }, [handleScroll]);\r\n \r\n   // Memoize banner items to prevent unnecessary re-renders\r\n   const bannerItems = useMemo(() => {\r\n-    return banners.map((banner, idx) => (\r\n+    return filteredBanners.map((banner, idx) => (\r\n       <BannerItem\r\n         key={banner._id || idx}\r\n         banner={banner}\r\n         idx={idx}\r\n       />\r\n     ));\r\n-  }, [banners]);\r\n+  }, [filteredBanners]);\r\n \r\n-  if (!banners || banners.length === 0) {\r\n+  // Show a loading state while banners are being processed client-side\r\n+  if (banners.length === 0 && initialBanners.length > 0) {\r\n     return (\r\n+        <div className=\"w-full h-screen bg-gradient-to-b from-gray-900 to-black flex items-center justify-center\">\r\n+            <div className=\"w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n+        </div>\r\n+    );\r\n+  }\r\n+  \r\n+  if (bannerItems.length === 0) {\r\n+    return (\r\n        <div className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden bg-black\">\r\n           <div className=\"text-white text-center\">\r\n               <h2 className=\"text-2xl font-bold mb-4\">Welcome to AISH</h2>\r\n-              <p>No active banners at the moment. Please check back later.</p>\r\n+              <p>No active banners for your device at the moment.</p>\r\n           </div>\r\n        </div>\r\n     );\r\n   }\r\n \r\n   return (\r\n     <>\r\n       <Head>\r\n-        {banners.map((banner, idx) => (\r\n+        {filteredBanners.map((banner, idx) => (\r\n           <link\r\n             key={banner._id || idx}\r\n             rel=\"preload\"\r\n             href={banner.imageUrl}\r\n"
                }
            ],
            "date": 1750476985213,
            "name": "Commit-0",
            "content": "\"use client\";\r\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { motion } from \"framer-motion\";\r\nimport Image from \"next/image\";\r\nimport React from \"react\";\r\n\r\nconst DEFAULT_BANNER_IMAGE = \"/images/image1.jpg\";\r\nconst SCROLL_ANIMATION_DURATION = 700;\r\n\r\nfunction easeInOutCubic(t) {\r\n  return t < 0.5\r\n    ? 4 * t * t * t\r\n    : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n}\r\n\r\nconst BannerItem = React.memo(({ banner, idx }) => (\r\n  <div\r\n    key={banner._id || idx}\r\n    className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden\"\r\n  >\r\n    <div className=\"relative w-full h-full flex items-center justify-center bg-black m-0 p-0\">\r\n      <Image\r\n        src={banner.imageUrl}\r\n        alt={banner.title || `Banner ${idx + 1}`}\r\n        fill\r\n        className=\"object-cover\"\r\n        priority={idx === 0} // Only prioritize the first image\r\n        loading={idx === 0 ? \"eager\" : \"lazy\"} // Eager load the first, lazy load the rest\r\n        sizes=\"100vw\"\r\n        quality={90}\r\n        placeholder=\"blur\"\r\n        blurDataURL={banner.blurDataURL || \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"}\r\n        style={{\r\n          objectFit: 'cover',\r\n          objectPosition: 'center',\r\n          willChange: 'transform',\r\n        }}\r\n        onError={(e) => {\r\n          e.currentTarget.src = DEFAULT_BANNER_IMAGE;\r\n        }}\r\n      />\r\n    </div>\r\n  </div>\r\n));\r\nBannerItem.displayName = 'BannerItem';\r\n\r\n\r\nexport default function BannerClientComponent({ initialBanners }) {\r\n  const [currentImage, setCurrentImage] = useState(0);\r\n  const [banners, setBanners] = useState(initialBanners);\r\n  const [isScrolling, setIsScrolling] = useState(false);\r\n  const router = useRouter();\r\n\r\n  // Scroll handler\r\n  const handleScroll = useCallback(\r\n    (e) => {\r\n      if (isScrolling || banners.length < 2) return;\r\n      \r\n      e.preventDefault();\r\n      \r\n      const delta = Math.sign(e.deltaY);\r\n      const newIdx = currentImage + delta;\r\n\r\n      if (newIdx < 0 || newIdx >= banners.length) {\r\n        return;\r\n      }\r\n      \r\n      setIsScrolling(true);\r\n      setCurrentImage(newIdx);\r\n\r\n      const winH = window.innerHeight;\r\n      const start = window.scrollY;\r\n      const end = newIdx * winH;\r\n      const startTime = performance.now();\r\n\r\n      function animateScroll(now) {\r\n        const elapsed = now - startTime;\r\n        const progress = Math.min(elapsed / SCROLL_ANIMATION_DURATION, 1);\r\n        window.scrollTo(0, start + (end - start) * easeInOutCubic(progress));\r\n        if (progress < 1) {\r\n          requestAnimationFrame(animateScroll);\r\n        } else {\r\n          // A short delay to prevent immediate re-triggering\r\n          setTimeout(() => setIsScrolling(false), 100); \r\n        }\r\n      }\r\n      requestAnimationFrame(animateScroll);\r\n    },\r\n    [banners.length, currentImage, isScrolling]\r\n  );\r\n  \r\n  // Attach scroll listener\r\n  useEffect(() => {\r\n    // Set scroll to top on mount\r\n    window.scrollTo(0, 0);\r\n\r\n    const debouncedScroll = (e) => {\r\n        // Simple debounce, main logic is in handleScroll\r\n        if (!isScrolling) {\r\n            handleScroll(e);\r\n        }\r\n    };\r\n\r\n    window.addEventListener(\"wheel\", debouncedScroll, { passive: false });\r\n    return () => window.removeEventListener(\"wheel\", debouncedScroll);\r\n  }, [handleScroll, isScrolling]);\r\n\r\n\r\n  // Memoize banner items to prevent unnecessary re-renders\r\n  const bannerItems = useMemo(() => {\r\n    return banners.map((banner, idx) => (\r\n      <BannerItem\r\n        key={banner._id || idx}\r\n        banner={banner}\r\n        idx={idx}\r\n      />\r\n    ));\r\n  }, [banners]);\r\n  \r\n  if (!banners || banners.length === 0) {\r\n    return (\r\n       <div className=\"relative w-full h-screen flex items-center justify-center m-0 p-0 overflow-hidden bg-black\">\r\n          <div className=\"text-white text-center\">\r\n              <h2 className=\"text-2xl font-bold mb-4\">Welcome to AISH</h2>\r\n              <p>No active banners at the moment. Please check back later.</p>\r\n          </div>\r\n       </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative w-full bg-black overflow-hidden\">\r\n        <div className=\"flex flex-col\" style={{ height: `${banners.length * 100}vh` }}>\r\n            <div className=\"sticky top-0 h-screen\">\r\n                 {bannerItems[currentImage]}\r\n            </div>\r\n        </div>\r\n\r\n      {/* SHOP NOW text */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        whileHover={{ scale: 1.05 }}\r\n        className=\"fixed top-24 left-8 z-20\"\r\n      >\r\n        <button\r\n          onClick={() => router.push(\"/products\")}\r\n          className=\"bg-white text-black px-4 py-1.5 md:px-6 md:py-2 text-xs md:text-sm font-semibold hover:bg-black hover:text-white transition-all duration-300\"\r\n        >\r\n          SHOP NOW\r\n        </button>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n} "
        }
    ]
}