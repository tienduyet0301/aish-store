{
    "sourceFile": "src/app/checkout/page.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 50,
            "patches": [
                {
                    "date": 1746893162146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746901649284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,8 +16,10 @@\n   const [showAdditionalContact, setShowAdditionalContact] = useState(false);\r\n   const [showPaymentDetails, setShowPaymentDetails] = useState(false);\r\n   const [errors, setErrors] = useState({});\r\n   const [isSubmitting, setIsSubmitting] = useState(false);\r\n+  const [isPromoApplied, setIsPromoApplied] = useState(false);\r\n+  const [promoAmount, setPromoAmount] = useState(0);\r\n \r\n   const order = {\r\n     items: cartItems.map((item) => ({\r\n       name: item.name,\r\n@@ -115,8 +117,20 @@\n   const handleAdditionalContactToggle = () => {\r\n     setShowAdditionalContact(!showAdditionalContact);\r\n   };\r\n \r\n+  const calculateTotal = () => {\r\n+    const subtotal = cartItems\r\n+      .reduce((total, item) => {\r\n+        const itemTotal = item.price * item.quantity;\r\n+        return total + itemTotal;\r\n+      }, 0);\r\n+\r\n+    const finalTotal = subtotal - (isPromoApplied ? promoAmount : 0);\r\n+    \r\n+    return finalTotal.toLocaleString('vi-VN') + \" VND\";\r\n+  };\r\n+\r\n   if (cartItems.length === 0) {\r\n     return (\r\n       <div style={{ backgroundColor: \"#FFFFFF\", minHeight: \"100vh\" }}>\r\n         <div style={styles.navbar}>\r\n"
                },
                {
                    "date": 1746901676271,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,10 @@\n   const [errors, setErrors] = useState({});\r\n   const [isSubmitting, setIsSubmitting] = useState(false);\r\n   const [isPromoApplied, setIsPromoApplied] = useState(false);\r\n   const [promoAmount, setPromoAmount] = useState(0);\r\n+  const [promoCode, setPromoCode] = useState(\"\");\r\n+  const [promoMessage, setPromoMessage] = useState(\"\");\r\n \r\n   const order = {\r\n     items: cartItems.map((item) => ({\r\n       name: item.name,\r\n@@ -117,8 +119,56 @@\n   const handleAdditionalContactToggle = () => {\r\n     setShowAdditionalContact(!showAdditionalContact);\r\n   };\r\n \r\n+  const handleApplyPromoCode = async () => {\r\n+    setPromoMessage(\"\");\r\n+    setPromoAmount(0);\r\n+    setIsPromoApplied(false);\r\n+\r\n+    if (!promoCode.trim()) {\r\n+      setPromoMessage(\"Vui lòng nhập mã giảm giá\");\r\n+      return;\r\n+    }\r\n+\r\n+    try {\r\n+      const response = await fetch(\"/api/admin/notifications\");\r\n+      const data = await response.json();\r\n+      \r\n+      if (data.ok && data.promoCodes) {\r\n+        const foundPromo = data.promoCodes.find(\r\n+          promo => promo.code.toLowerCase() === promoCode.toLowerCase() && promo.isActive\r\n+        );\r\n+        \r\n+        if (foundPromo) {\r\n+          setPromoAmount(foundPromo.amount);\r\n+          setIsPromoApplied(true);\r\n+          setPromoMessage(`Mã giảm giá ${foundPromo.amount.toLocaleString('vi-VN')} VND đã được áp dụng!`);\r\n+        } else {\r\n+          setPromoMessage(\"Mã giảm giá không hợp lệ hoặc đã hết hạn\");\r\n+          setPromoAmount(0);\r\n+          setIsPromoApplied(false);\r\n+        }\r\n+      } else {\r\n+        setPromoMessage(\"Không thể kiểm tra mã giảm giá\");\r\n+        setPromoAmount(0);\r\n+        setIsPromoApplied(false);\r\n+      }\r\n+    } catch (error) {\r\n+      console.error(\"Error applying promo code:\", error);\r\n+      setPromoMessage(\"Có lỗi xảy ra khi áp dụng mã giảm giá\");\r\n+      setPromoAmount(0);\r\n+      setIsPromoApplied(false);\r\n+    }\r\n+  };\r\n+\r\n+  const handleResetPromoCode = () => {\r\n+    setPromoCode(\"\");\r\n+    setPromoMessage(\"\");\r\n+    setPromoAmount(0);\r\n+    setIsPromoApplied(false);\r\n+  };\r\n+\r\n   const calculateTotal = () => {\r\n     const subtotal = cartItems\r\n       .reduce((total, item) => {\r\n         const itemTotal = item.price * item.quantity;\r\n"
                },
                {
                    "date": 1746901727332,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n \"use client\";\r\n-import { useState } from \"react\";\r\n+import { useState, useEffect } from \"react\";\r\n import { useCart } from \"../../context/CartContext\";\r\n import ShippingPage from \"./shipping/page\";\r\n import OrderSummary from \"./summary/page\";\r\n import Link from \"next/link\";\r\n@@ -10,8 +10,9 @@\n export default function Checkout() {\r\n   const { cartItems, clearCart } = useCart();\r\n   const router = useRouter();\r\n   const userEmail = \"dichth03@gmail.com\";\r\n+  const [isMounted, setIsMounted] = useState(false);\r\n \r\n   const [isShippingComplete, setIsShippingComplete] = useState(false);\r\n   const [showAdditionalContact, setShowAdditionalContact] = useState(false);\r\n   const [showPaymentDetails, setShowPaymentDetails] = useState(false);\r\n@@ -21,8 +22,14 @@\n   const [promoAmount, setPromoAmount] = useState(0);\r\n   const [promoCode, setPromoCode] = useState(\"\");\r\n   const [promoMessage, setPromoMessage] = useState(\"\");\r\n \r\n+  useEffect(() => {\r\n+    setIsMounted(true);\r\n+  }, []);\r\n+\r\n+  if (!isMounted) return null;\r\n+\r\n   const order = {\r\n     items: cartItems.map((item) => ({\r\n       name: item.name,\r\n       quantity: item.quantity,\r\n"
                },
                {
                    "date": 1747067295618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n \r\n export default function Checkout() {\r\n   const { cartItems, clearCart } = useCart();\r\n   const router = useRouter();\r\n-  const userEmail = \"dichth03@gmail.com\";\r\n+  const [userEmail, setUserEmail] = useState(\"\");\r\n   const [isMounted, setIsMounted] = useState(false);\r\n \r\n   const [isShippingComplete, setIsShippingComplete] = useState(false);\r\n   const [showAdditionalContact, setShowAdditionalContact] = useState(false);\r\n@@ -24,9 +24,17 @@\n   const [promoMessage, setPromoMessage] = useState(\"\");\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n-  }, []);\r\n+    // Lấy email từ localStorage hoặc session\r\n+    const email = localStorage.getItem('userEmail') || sessionStorage.getItem('userEmail');\r\n+    if (email) {\r\n+      setUserEmail(email);\r\n+    } else {\r\n+      // Nếu không có email, chuyển hướng về trang đăng nhập\r\n+      router.push('/login');\r\n+    }\r\n+  }, [router]);\r\n \r\n   if (!isMounted) return null;\r\n \r\n   const order = {\r\n"
                },
                {
                    "date": 1747067430292,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,15 +24,24 @@\n   const [promoMessage, setPromoMessage] = useState(\"\");\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n-    // Lấy email từ localStorage hoặc session\r\n-    const email = localStorage.getItem('userEmail') || sessionStorage.getItem('userEmail');\r\n+    // Lấy email từ localStorage, sessionStorage hoặc cookies\r\n+    const email = localStorage.getItem('userEmail') || \r\n+                 sessionStorage.getItem('userEmail') || \r\n+                 document.cookie.split('; ').find(row => row.startsWith('userEmail='))?.split('=')[1];\r\n+    \r\n     if (email) {\r\n       setUserEmail(email);\r\n     } else {\r\n-      // Nếu không có email, chuyển hướng về trang đăng nhập\r\n-      router.push('/login');\r\n+      // Kiểm tra xem người dùng đã đăng nhập chưa\r\n+      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true' || \r\n+                        sessionStorage.getItem('isLoggedIn') === 'true' ||\r\n+                        document.cookie.split('; ').find(row => row.startsWith('isLoggedIn='))?.split('=')[1] === 'true';\r\n+      \r\n+      if (!isLoggedIn) {\r\n+        router.push('/login');\r\n+      }\r\n     }\r\n   }, [router]);\r\n \r\n   if (!isMounted) return null;\r\n"
                },
                {
                    "date": 1747067536413,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,26 +24,26 @@\n   const [promoMessage, setPromoMessage] = useState(\"\");\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n-    // Lấy email từ localStorage, sessionStorage hoặc cookies\r\n-    const email = localStorage.getItem('userEmail') || \r\n-                 sessionStorage.getItem('userEmail') || \r\n-                 document.cookie.split('; ').find(row => row.startsWith('userEmail='))?.split('=')[1];\r\n+    // Kiểm tra trạng thái đăng nhập\r\n+    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true' || \r\n+                      sessionStorage.getItem('isLoggedIn') === 'true';\r\n     \r\n-    if (email) {\r\n-      setUserEmail(email);\r\n-    } else {\r\n-      // Kiểm tra xem người dùng đã đăng nhập chưa\r\n-      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true' || \r\n-                        sessionStorage.getItem('isLoggedIn') === 'true' ||\r\n-                        document.cookie.split('; ').find(row => row.startsWith('isLoggedIn='))?.split('=')[1] === 'true';\r\n-      \r\n-      if (!isLoggedIn) {\r\n-        router.push('/login');\r\n-      }\r\n+    if (isLoggedIn) {\r\n+      // Nếu đã đăng nhập, lấy email từ database\r\n+      fetch('/api/auth/user')\r\n+        .then(res => res.json())\r\n+        .then(data => {\r\n+          if (data.email) {\r\n+            setUserEmail(data.email);\r\n+          }\r\n+        })\r\n+        .catch(error => {\r\n+          console.error('Error fetching user email:', error);\r\n+        });\r\n     }\r\n-  }, [router]);\r\n+  }, []);\r\n \r\n   if (!isMounted) return null;\r\n \r\n   const order = {\r\n"
                },
                {
                    "date": 1747067574010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,26 +24,17 @@\n   const [promoMessage, setPromoMessage] = useState(\"\");\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n-    // Kiểm tra trạng thái đăng nhập\r\n-    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true' || \r\n-                      sessionStorage.getItem('isLoggedIn') === 'true';\r\n-    \r\n-    if (isLoggedIn) {\r\n-      // Nếu đã đăng nhập, lấy email từ database\r\n-      fetch('/api/auth/user')\r\n-        .then(res => res.json())\r\n-        .then(data => {\r\n-          if (data.email) {\r\n-            setUserEmail(data.email);\r\n-          }\r\n-        })\r\n-        .catch(error => {\r\n-          console.error('Error fetching user email:', error);\r\n-        });\r\n+    // Lấy email từ localStorage hoặc session\r\n+    const email = localStorage.getItem('userEmail') || sessionStorage.getItem('userEmail');\r\n+    if (email) {\r\n+      setUserEmail(email);\r\n+    } else {\r\n+      // Nếu không có email, chuyển hướng về trang đăng nhập\r\n+      router.push('/login');\r\n     }\r\n-  }, []);\r\n+  }, [router]);\r\n \r\n   if (!isMounted) return null;\r\n \r\n   const order = {\r\n"
                },
                {
                    "date": 1747067635464,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,13 +28,10 @@\n     // Lấy email từ localStorage hoặc session\r\n     const email = localStorage.getItem('userEmail') || sessionStorage.getItem('userEmail');\r\n     if (email) {\r\n       setUserEmail(email);\r\n-    } else {\r\n-      // Nếu không có email, chuyển hướng về trang đăng nhập\r\n-      router.push('/login');\r\n     }\r\n-  }, [router]);\r\n+  }, []);\r\n \r\n   if (!isMounted) return null;\r\n \r\n   const order = {\r\n"
                },
                {
                    "date": 1747068289877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,13 +24,22 @@\n   const [promoMessage, setPromoMessage] = useState(\"\");\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n-    // Lấy email từ localStorage hoặc session\r\n-    const email = localStorage.getItem('userEmail') || sessionStorage.getItem('userEmail');\r\n-    if (email) {\r\n-      setUserEmail(email);\r\n+    async function fetchUser() {\r\n+      try {\r\n+        const res = await fetch('/api/user/profile');\r\n+        if (res.ok) {\r\n+          const user = await res.json();\r\n+          setUserEmail(user.email || \"\");\r\n+        } else {\r\n+          setUserEmail(\"\");\r\n+        }\r\n+      } catch {\r\n+        setUserEmail(\"\");\r\n+      }\r\n     }\r\n+    fetchUser();\r\n   }, []);\r\n \r\n   if (!isMounted) return null;\r\n \r\n"
                },
                {
                    "date": 1747107575492,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,10 +96,11 @@\n         lastName: formData.get('lastName'),\r\n         email: formData.get('email'),\r\n         phone: formData.get('phone'),\r\n         address: formData.get('address'),\r\n-        city: formData.get('city'),\r\n-        state: formData.get('state'),\r\n+        ward: formData.get('ward'),\r\n+        district: formData.get('district'),\r\n+        province: formData.get('province'),\r\n         zipCode: formData.get('zipCode'),\r\n         country: formData.get('country'),\r\n       };\r\n \r\n"
                },
                {
                    "date": 1747107853620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,11 +96,11 @@\n         lastName: formData.get('lastName'),\r\n         email: formData.get('email'),\r\n         phone: formData.get('phone'),\r\n         address: formData.get('address'),\r\n-        ward: formData.get('ward'),\r\n-        district: formData.get('district'),\r\n-        province: formData.get('province'),\r\n+        ward: formData.get('ward') || \"\",\r\n+        district: formData.get('district') || \"\",\r\n+        province: formData.get('province') || \"\",\r\n         zipCode: formData.get('zipCode'),\r\n         country: formData.get('country'),\r\n       };\r\n \r\n@@ -108,8 +108,11 @@\n       const orderData = {\r\n         ...order,\r\n         contactInfo,\r\n         userEmail,\r\n+        ward: formData.get('ward') || \"\",\r\n+        district: formData.get('district') || \"\",\r\n+        province: formData.get('province') || \"\",\r\n       };\r\n \r\n       // Gửi đơn hàng lên server\r\n       const response = await fetch('/api/orders', {\r\n"
                },
                {
                    "date": 1747108688301,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,29 +90,22 @@\n       setIsSubmitting(true);\r\n \r\n       // Lấy thông tin từ form\r\n       const formData = new FormData(document.querySelector('form'));\r\n-      const contactInfo = {\r\n-        firstName: formData.get('firstName'),\r\n-        lastName: formData.get('lastName'),\r\n-        email: formData.get('email'),\r\n-        phone: formData.get('phone'),\r\n-        address: formData.get('address'),\r\n-        ward: formData.get('ward') || \"\",\r\n-        district: formData.get('district') || \"\",\r\n-        province: formData.get('province') || \"\",\r\n-        zipCode: formData.get('zipCode'),\r\n-        country: formData.get('country'),\r\n-      };\r\n-\r\n-      // Tạo đơn hàng\r\n       const orderData = {\r\n         ...order,\r\n-        contactInfo,\r\n         userEmail,\r\n+        address: formData.get('address') || \"\",\r\n+        apartment: formData.get('apartment') || \"\",\r\n         ward: formData.get('ward') || \"\",\r\n         district: formData.get('district') || \"\",\r\n         province: formData.get('province') || \"\",\r\n+        zipCode: formData.get('zipCode') || \"\",\r\n+        country: formData.get('country') || \"\",\r\n+        phone: formData.get('phone') || \"\",\r\n+        fullName: formData.get('firstName') + ' ' + formData.get('lastName'),\r\n+        email: formData.get('email') || \"\",\r\n+        additionalPhone: formData.get('additionalPhone') || \"\",\r\n       };\r\n \r\n       // Gửi đơn hàng lên server\r\n       const response = await fetch('/api/orders', {\r\n"
                },
                {
                    "date": 1747203904915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,8 +44,9 @@\n   if (!isMounted) return null;\r\n \r\n   const order = {\r\n     items: cartItems.map((item) => ({\r\n+      productId: item.id,\r\n       name: item.name,\r\n       quantity: item.quantity,\r\n       color: item.color || \"Unknown\",\r\n       size: item.size || \"Unknown\",\r\n"
                },
                {
                    "date": 1747208431177,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,21 +47,19 @@\n     items: cartItems.map((item) => ({\r\n       productId: item.id,\r\n       name: item.name,\r\n       quantity: item.quantity,\r\n-      color: item.color || \"Unknown\",\r\n-      size: item.size || \"Unknown\",\r\n-      price: `AU$ ${item.price.toFixed(2)}`,\r\n+      color: item.color,\r\n+      size: item.size,\r\n+      price: item.price,\r\n       image: item.image || \"/images/image1.jpg\",\r\n     })),\r\n-    subtotal: `AU$ ${cartItems\r\n-      .reduce((total, item) => total + item.price * item.quantity, 0)\r\n-      .toFixed(2)}`,\r\n+    subtotal: cartItems\r\n+      .reduce((total, item) => total + item.price * item.quantity, 0),\r\n     shipping: \"Free (Express)\",\r\n-    gst: `AU$ ${(cartItems.reduce((total, item) => total + item.price * item.quantity, 0) * 0.1).toFixed(2)}`,\r\n-    total: `AU$ ${cartItems\r\n-      .reduce((total, item) => total + item.price * item.quantity, 0)\r\n-      .toFixed(2)}`,\r\n+    gst: cartItems.reduce((total, item) => total + item.price * item.quantity, 0) * 0.1,\r\n+    total: cartItems\r\n+      .reduce((total, item) => total + item.price * item.quantity, 0),\r\n   };\r\n \r\n   const validateInputs = () => {\r\n     const newErrors = {};\r\n"
                },
                {
                    "date": 1747389524221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -242,30 +242,46 @@\n     );\r\n   }\r\n \r\n   return (\r\n-    <div style={{ ...styles.pageContainer, backgroundColor: \"#FFFFFF\" }}>\r\n-      <div style={styles.navbar}>\r\n-        <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n-      </div>\r\n-      <div style={styles.backButtonContainer}>\r\n-        <Link href=\"/cart\" style={styles.backButton}>\r\n-          &lt; Back to Shopping Bag\r\n-        </Link>\r\n-      </div>\r\n-      <div style={styles.checkoutContainer}>\r\n+    <div style={{\r\n+      display: \"flex\",\r\n+      flexDirection: \"row\",\r\n+      gap: \"20px\",\r\n+      padding: \"20px\",\r\n+      maxWidth: \"1200px\",\r\n+      margin: \"0 auto\",\r\n+      \"@media (max-width: 768px)\": {\r\n+        flexDirection: \"column\",\r\n+        padding: \"0\",\r\n+        gap: \"0\"\r\n+      }\r\n+    }}>\r\n+      <div style={{\r\n+        flex: 2,\r\n+        \"@media (max-width: 768px)\": {\r\n+          width: \"100%\",\r\n+          order: 1\r\n+        }\r\n+      }}>\r\n         <ShippingPage\r\n           userEmail={userEmail}\r\n           isShippingComplete={isShippingComplete}\r\n           showAdditionalContact={showAdditionalContact}\r\n           showPaymentDetails={showPaymentDetails}\r\n           errors={errors}\r\n           handleShippingComplete={handleShippingComplete}\r\n           handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n-          handlePlaceOrder={handlePlaceOrder}\r\n-          isSubmitting={isSubmitting}\r\n           order={order}\r\n         />\r\n+      </div>\r\n+      <div style={{\r\n+        flex: 1,\r\n+        \"@media (max-width: 768px)\": {\r\n+          width: \"100%\",\r\n+          order: 2\r\n+        }\r\n+      }}>\r\n         <OrderSummary order={order} />\r\n       </div>\r\n     </div>\r\n   );\r\n"
                },
                {
                    "date": 1747389548481,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -242,46 +242,30 @@\n     );\r\n   }\r\n \r\n   return (\r\n-    <div style={{\r\n-      display: \"flex\",\r\n-      flexDirection: \"row\",\r\n-      gap: \"20px\",\r\n-      padding: \"20px\",\r\n-      maxWidth: \"1200px\",\r\n-      margin: \"0 auto\",\r\n-      \"@media (max-width: 768px)\": {\r\n-        flexDirection: \"column\",\r\n-        padding: \"0\",\r\n-        gap: \"0\"\r\n-      }\r\n-    }}>\r\n-      <div style={{\r\n-        flex: 2,\r\n-        \"@media (max-width: 768px)\": {\r\n-          width: \"100%\",\r\n-          order: 1\r\n-        }\r\n-      }}>\r\n+    <div style={{ ...styles.pageContainer, backgroundColor: \"#FFFFFF\" }}>\r\n+      <div style={styles.navbar}>\r\n+        <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n+      </div>\r\n+      <div style={styles.backButtonContainer}>\r\n+        <Link href=\"/cart\" style={styles.backButton}>\r\n+          &lt; Back to Shopping Bag\r\n+        </Link>\r\n+      </div>\r\n+      <div style={styles.checkoutContainer}>\r\n         <ShippingPage\r\n           userEmail={userEmail}\r\n           isShippingComplete={isShippingComplete}\r\n           showAdditionalContact={showAdditionalContact}\r\n           showPaymentDetails={showPaymentDetails}\r\n           errors={errors}\r\n           handleShippingComplete={handleShippingComplete}\r\n           handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n+          handlePlaceOrder={handlePlaceOrder}\r\n+          isSubmitting={isSubmitting}\r\n           order={order}\r\n         />\r\n-      </div>\r\n-      <div style={{\r\n-        flex: 1,\r\n-        \"@media (max-width: 768px)\": {\r\n-          width: \"100%\",\r\n-          order: 2\r\n-        }\r\n-      }}>\r\n         <OrderSummary order={order} />\r\n       </div>\r\n     </div>\r\n   );\r\n"
                },
                {
                    "date": 1747389593810,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -307,11 +307,12 @@\n     gap: \"20px\",\r\n     padding: \"20px\",\r\n     backgroundColor: \"#ffffff\",\r\n     color: \"#000000\",\r\n-  },\r\n-  \"@media (maxWidth: 768px)\": {\r\n-    checkoutContainer: {\r\n+    \"@media (max-width: 768px)\": {\r\n       flexDirection: \"column\",\r\n-    },\r\n+      padding: \"0\",\r\n+      margin: \"0\",\r\n+      gap: \"0\"\r\n+    }\r\n   },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747389707460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -307,12 +307,11 @@\n     gap: \"20px\",\r\n     padding: \"20px\",\r\n     backgroundColor: \"#ffffff\",\r\n     color: \"#000000\",\r\n-    \"@media (max-width: 768px)\": {\r\n+  },\r\n+  \"@media (maxWidth: 768px)\": {\r\n+    checkoutContainer: {\r\n       flexDirection: \"column\",\r\n-      padding: \"0\",\r\n-      margin: \"0\",\r\n-      gap: \"0\"\r\n-    }\r\n+    },\r\n   },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747389742032,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -307,11 +307,12 @@\n     gap: \"20px\",\r\n     padding: \"20px\",\r\n     backgroundColor: \"#ffffff\",\r\n     color: \"#000000\",\r\n-  },\r\n-  \"@media (maxWidth: 768px)\": {\r\n-    checkoutContainer: {\r\n+    \"@media (max-width: 768px)\": {\r\n       flexDirection: \"column\",\r\n-    },\r\n+      padding: \"0\",\r\n+      margin: \"0\",\r\n+      gap: \"0\"\r\n+    }\r\n   },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747389784497,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -307,12 +307,11 @@\n     gap: \"20px\",\r\n     padding: \"20px\",\r\n     backgroundColor: \"#ffffff\",\r\n     color: \"#000000\",\r\n-    \"@media (max-width: 768px)\": {\r\n+  },\r\n+  \"@media (maxWidth: 768px)\": {\r\n+    checkoutContainer: {\r\n       flexDirection: \"column\",\r\n-      padding: \"0\",\r\n-      margin: \"0\",\r\n-      gap: \"0\"\r\n-    }\r\n+    },\r\n   },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747389829726,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -251,22 +251,46 @@\n         <Link href=\"/cart\" style={styles.backButton}>\r\n           &lt; Back to Shopping Bag\r\n         </Link>\r\n       </div>\r\n-      <div style={styles.checkoutContainer}>\r\n-        <ShippingPage\r\n-          userEmail={userEmail}\r\n-          isShippingComplete={isShippingComplete}\r\n-          showAdditionalContact={showAdditionalContact}\r\n-          showPaymentDetails={showPaymentDetails}\r\n-          errors={errors}\r\n-          handleShippingComplete={handleShippingComplete}\r\n-          handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n-          handlePlaceOrder={handlePlaceOrder}\r\n-          isSubmitting={isSubmitting}\r\n-          order={order}\r\n-        />\r\n-        <OrderSummary order={order} />\r\n+      <div style={{\r\n+        ...styles.checkoutContainer,\r\n+        \"@media (max-width: 768px)\": {\r\n+          flexDirection: \"column\",\r\n+          padding: \"0\",\r\n+          margin: \"0\",\r\n+          gap: \"0\"\r\n+        }\r\n+      }}>\r\n+        <div style={{\r\n+          flex: 2,\r\n+          \"@media (max-width: 768px)\": {\r\n+            width: \"100%\",\r\n+            order: 1\r\n+          }\r\n+        }}>\r\n+          <ShippingPage\r\n+            userEmail={userEmail}\r\n+            isShippingComplete={isShippingComplete}\r\n+            showAdditionalContact={showAdditionalContact}\r\n+            showPaymentDetails={showPaymentDetails}\r\n+            errors={errors}\r\n+            handleShippingComplete={handleShippingComplete}\r\n+            handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n+            handlePlaceOrder={handlePlaceOrder}\r\n+            isSubmitting={isSubmitting}\r\n+            order={order}\r\n+          />\r\n+        </div>\r\n+        <div style={{\r\n+          flex: 1,\r\n+          \"@media (max-width: 768px)\": {\r\n+            width: \"100%\",\r\n+            order: 2\r\n+          }\r\n+        }}>\r\n+          <OrderSummary order={order} />\r\n+        </div>\r\n       </div>\r\n     </div>\r\n   );\r\n }\r\n"
                },
                {
                    "date": 1747389866537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -251,46 +251,22 @@\n         <Link href=\"/cart\" style={styles.backButton}>\r\n           &lt; Back to Shopping Bag\r\n         </Link>\r\n       </div>\r\n-      <div style={{\r\n-        ...styles.checkoutContainer,\r\n-        \"@media (max-width: 768px)\": {\r\n-          flexDirection: \"column\",\r\n-          padding: \"0\",\r\n-          margin: \"0\",\r\n-          gap: \"0\"\r\n-        }\r\n-      }}>\r\n-        <div style={{\r\n-          flex: 2,\r\n-          \"@media (max-width: 768px)\": {\r\n-            width: \"100%\",\r\n-            order: 1\r\n-          }\r\n-        }}>\r\n-          <ShippingPage\r\n-            userEmail={userEmail}\r\n-            isShippingComplete={isShippingComplete}\r\n-            showAdditionalContact={showAdditionalContact}\r\n-            showPaymentDetails={showPaymentDetails}\r\n-            errors={errors}\r\n-            handleShippingComplete={handleShippingComplete}\r\n-            handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n-            handlePlaceOrder={handlePlaceOrder}\r\n-            isSubmitting={isSubmitting}\r\n-            order={order}\r\n-          />\r\n-        </div>\r\n-        <div style={{\r\n-          flex: 1,\r\n-          \"@media (max-width: 768px)\": {\r\n-            width: \"100%\",\r\n-            order: 2\r\n-          }\r\n-        }}>\r\n-          <OrderSummary order={order} />\r\n-        </div>\r\n+      <div style={styles.checkoutContainer}>\r\n+        <ShippingPage\r\n+          userEmail={userEmail}\r\n+          isShippingComplete={isShippingComplete}\r\n+          showAdditionalContact={showAdditionalContact}\r\n+          showPaymentDetails={showPaymentDetails}\r\n+          errors={errors}\r\n+          handleShippingComplete={handleShippingComplete}\r\n+          handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n+          handlePlaceOrder={handlePlaceOrder}\r\n+          isSubmitting={isSubmitting}\r\n+          order={order}\r\n+        />\r\n+        <OrderSummary order={order} />\r\n       </div>\r\n     </div>\r\n   );\r\n }\r\n"
                },
                {
                    "date": 1747389922490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -251,22 +251,26 @@\n         <Link href=\"/cart\" style={styles.backButton}>\r\n           &lt; Back to Shopping Bag\r\n         </Link>\r\n       </div>\r\n-      <div style={styles.checkoutContainer}>\r\n-        <ShippingPage\r\n-          userEmail={userEmail}\r\n-          isShippingComplete={isShippingComplete}\r\n-          showAdditionalContact={showAdditionalContact}\r\n-          showPaymentDetails={showPaymentDetails}\r\n-          errors={errors}\r\n-          handleShippingComplete={handleShippingComplete}\r\n-          handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n-          handlePlaceOrder={handlePlaceOrder}\r\n-          isSubmitting={isSubmitting}\r\n-          order={order}\r\n-        />\r\n-        <OrderSummary order={order} />\r\n+      <div className=\"flex flex-col md:flex-row max-w-[1200px] mx-auto gap-0 md:gap-5 p-0 md:p-5 bg-white text-black\">\r\n+        <div className=\"w-full md:w-2/3\">\r\n+          <ShippingPage\r\n+            userEmail={userEmail}\r\n+            isShippingComplete={isShippingComplete}\r\n+            showAdditionalContact={showAdditionalContact}\r\n+            showPaymentDetails={showPaymentDetails}\r\n+            errors={errors}\r\n+            handleShippingComplete={handleShippingComplete}\r\n+            handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n+            handlePlaceOrder={handlePlaceOrder}\r\n+            isSubmitting={isSubmitting}\r\n+            order={order}\r\n+          />\r\n+        </div>\r\n+        <div className=\"w-full md:w-1/3\">\r\n+          <OrderSummary order={order} />\r\n+        </div>\r\n       </div>\r\n     </div>\r\n   );\r\n }\r\n"
                },
                {
                    "date": 1747390053078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,9 @@\n       <div style={styles.navbar}>\r\n         <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n       </div>\r\n       <div style={styles.backButtonContainer}>\r\n-        <Link href=\"/cart\" style={styles.backButton}>\r\n+        <Link href=\"/cart\" className=\"font-bold underline text-xs md:text-base\" style={{ color: \"#000000\", cursor: \"pointer\", transition: \"opacity 0.3s ease\" }}>\r\n           &lt; Back to Shopping Bag\r\n         </Link>\r\n       </div>\r\n       <div className=\"flex flex-col md:flex-row max-w-[1200px] mx-auto gap-0 md:gap-5 p-0 md:p-5 bg-white text-black\">\r\n"
                },
                {
                    "date": 1747390078965,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,9 @@\n       <div style={styles.navbar}>\r\n         <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n       </div>\r\n       <div style={styles.backButtonContainer}>\r\n-        <Link href=\"/cart\" className=\"font-bold underline text-xs md:text-base\" style={{ color: \"#000000\", cursor: \"pointer\", transition: \"opacity 0.3s ease\" }}>\r\n+        <Link href=\"/cart\" style={styles.backButton}>\r\n           &lt; Back to Shopping Bag\r\n         </Link>\r\n       </div>\r\n       <div className=\"flex flex-col md:flex-row max-w-[1200px] mx-auto gap-0 md:gap-5 p-0 md:p-5 bg-white text-black\">\r\n"
                },
                {
                    "date": 1747390115706,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,9 @@\n       <div style={styles.navbar}>\r\n         <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n       </div>\r\n       <div style={styles.backButtonContainer}>\r\n-        <Link href=\"/cart\" style={styles.backButton}>\r\n+        <Link href=\"/cart\" className=\"font-bold underline text-xs\" style={{ color: \"#000000\", cursor: \"pointer\", transition: \"opacity 0.3s ease\" }}>\r\n           &lt; Back to Shopping Bag\r\n         </Link>\r\n       </div>\r\n       <div className=\"flex flex-col md:flex-row max-w-[1200px] mx-auto gap-0 md:gap-5 p-0 md:p-5 bg-white text-black\">\r\n"
                },
                {
                    "date": 1747390183214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,9 @@\n       <div style={styles.navbar}>\r\n         <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n       </div>\r\n       <div style={styles.backButtonContainer}>\r\n-        <Link href=\"/cart\" className=\"font-bold underline text-xs\" style={{ color: \"#000000\", cursor: \"pointer\", transition: \"opacity 0.3s ease\" }}>\r\n+        <Link href=\"/cart\" style={styles.backButton}>\r\n           &lt; Back to Shopping Bag\r\n         </Link>\r\n       </div>\r\n       <div className=\"flex flex-col md:flex-row max-w-[1200px] mx-auto gap-0 md:gap-5 p-0 md:p-5 bg-white text-black\">\r\n"
                },
                {
                    "date": 1747390204569,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,9 @@\n       <div style={styles.navbar}>\r\n         <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n       </div>\r\n       <div style={styles.backButtonContainer}>\r\n-        <Link href=\"/cart\" style={styles.backButton}>\r\n+        <Link href=\"/cart\" className=\"font-bold underline text-[11px] py-1 px-2 leading-tight\" style={{ color: \"#000000\", cursor: \"pointer\", transition: \"opacity 0.3s ease\" }}>\r\n           &lt; Back to Shopping Bag\r\n         </Link>\r\n       </div>\r\n       <div className=\"flex flex-col md:flex-row max-w-[1200px] mx-auto gap-0 md:gap-5 p-0 md:p-5 bg-white text-black\">\r\n"
                },
                {
                    "date": 1747390324111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -248,9 +248,10 @@\n         <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n       </div>\r\n       <div style={styles.backButtonContainer}>\r\n         <Link href=\"/cart\" className=\"font-bold underline text-[11px] py-1 px-2 leading-tight\" style={{ color: \"#000000\", cursor: \"pointer\", transition: \"opacity 0.3s ease\" }}>\r\n-          &lt; Back to Shopping Bag\r\n+          <span className=\"block md:hidden\">Back to Cart</span>\r\n+          <span className=\"hidden md:inline\">&lt; Back to Shopping Bag</span>\r\n         </Link>\r\n       </div>\r\n       <div className=\"flex flex-col md:flex-row max-w-[1200px] mx-auto gap-0 md:gap-5 p-0 md:p-5 bg-white text-black\">\r\n         <div className=\"w-full md:w-2/3\">\r\n"
                },
                {
                    "date": 1747390397282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -248,9 +248,9 @@\n         <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n       </div>\r\n       <div style={styles.backButtonContainer}>\r\n         <Link href=\"/cart\" className=\"font-bold underline text-[11px] py-1 px-2 leading-tight\" style={{ color: \"#000000\", cursor: \"pointer\", transition: \"opacity 0.3s ease\" }}>\r\n-          <span className=\"block md:hidden\">Back to Cart</span>\r\n+          <span className=\"block md:hidden\">&lt; BACK TO CART</span>\r\n           <span className=\"hidden md:inline\">&lt; Back to Shopping Bag</span>\r\n         </Link>\r\n       </div>\r\n       <div className=\"flex flex-col md:flex-row max-w-[1200px] mx-auto gap-0 md:gap-5 p-0 md:p-5 bg-white text-black\">\r\n"
                },
                {
                    "date": 1747391337683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -269,8 +269,15 @@\n           />\r\n         </div>\r\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n+          <button\r\n+            onClick={handlePlaceOrder}\r\n+            className=\"block md:hidden w-full mt-4 bg-black text-white py-3 rounded font-semibold\"\r\n+            style={{ fontSize: \"14px\" }}\r\n+          >\r\n+            Complete Order\r\n+          </button>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   );\r\n"
                },
                {
                    "date": 1747391472694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -271,9 +271,9 @@\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n           <button\r\n             onClick={handlePlaceOrder}\r\n-            className=\"block md:hidden w-full mt-4 bg-black text-white py-3 rounded font-semibold\"\r\n+            className=\"block md:hidden w-full mt-4 mb-8 bg-black text-white py-3 rounded font-semibold\"\r\n             style={{ fontSize: \"14px\" }}\r\n           >\r\n             Complete Order\r\n           </button>\r\n"
                },
                {
                    "date": 1747391571785,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -271,10 +271,10 @@\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n           <button\r\n             onClick={handlePlaceOrder}\r\n-            className=\"block md:hidden w-full mt-4 mb-8 bg-black text-white py-3 rounded font-semibold\"\r\n-            style={{ fontSize: \"14px\" }}\r\n+            className=\"block md:hidden w-full mt-4 mb-8 font-semibold bg-black text-white py-3 rounded\"\r\n+            style={styles.continueButton}\r\n           >\r\n             Complete Order\r\n           </button>\r\n         </div>\r\n@@ -325,5 +325,8 @@\n     checkoutContainer: {\r\n       flexDirection: \"column\",\r\n     },\r\n   },\r\n+  continueButton: {\r\n+    fontSize: \"14px\",\r\n+  },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747391629552,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -271,10 +271,10 @@\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n           <button\r\n             onClick={handlePlaceOrder}\r\n-            className=\"block md:hidden w-full mt-4 mb-8 font-semibold bg-black text-white py-3 rounded\"\r\n-            style={styles.continueButton}\r\n+            className=\"block md:hidden w-full mt-4 bg-black text-white py-3 rounded font-semibold\"\r\n+            style={{ fontSize: \"14px\" }}\r\n           >\r\n             Complete Order\r\n           </button>\r\n         </div>\r\n@@ -325,8 +325,5 @@\n     checkoutContainer: {\r\n       flexDirection: \"column\",\r\n     },\r\n   },\r\n-  continueButton: {\r\n-    fontSize: \"14px\",\r\n-  },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747391662455,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -271,10 +271,10 @@\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n           <button\r\n             onClick={handlePlaceOrder}\r\n-            className=\"block md:hidden w-full mt-4 bg-black text-white py-3 rounded font-semibold\"\r\n-            style={{ fontSize: \"14px\" }}\r\n+            className=\"block md:hidden w-full\"\r\n+            style={styles.continueButton}\r\n           >\r\n             Complete Order\r\n           </button>\r\n         </div>\r\n@@ -325,5 +325,15 @@\n     checkoutContainer: {\r\n       flexDirection: \"column\",\r\n     },\r\n   },\r\n+  continueButton: {\r\n+    backgroundColor: \"#000000\",\r\n+    color: \"#FFFFFF\",\r\n+    padding: \"10px 20px\",\r\n+    border: \"none\",\r\n+    cursor: \"pointer\",\r\n+    fontSize: \"0.9em\",\r\n+    fontWeight: \"bold\",\r\n+    width: \"100%\",\r\n+  },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747391698404,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -271,10 +271,10 @@\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n           <button\r\n             onClick={handlePlaceOrder}\r\n-            className=\"block md:hidden w-full\"\r\n-            style={styles.continueButton}\r\n+            className=\"block md:hidden w-full mt-4 bg-black text-white py-3 rounded font-semibold\"\r\n+            style={{ fontSize: \"14px\" }}\r\n           >\r\n             Complete Order\r\n           </button>\r\n         </div>\r\n@@ -325,15 +325,5 @@\n     checkoutContainer: {\r\n       flexDirection: \"column\",\r\n     },\r\n   },\r\n-  continueButton: {\r\n-    backgroundColor: \"#000000\",\r\n-    color: \"#FFFFFF\",\r\n-    padding: \"10px 20px\",\r\n-    border: \"none\",\r\n-    cursor: \"pointer\",\r\n-    fontSize: \"0.9em\",\r\n-    fontWeight: \"bold\",\r\n-    width: \"100%\",\r\n-  },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747391723971,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -271,10 +271,10 @@\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n           <button\r\n             onClick={handlePlaceOrder}\r\n-            className=\"block md:hidden w-full mt-4 bg-black text-white py-3 rounded font-semibold\"\r\n-            style={{ fontSize: \"14px\" }}\r\n+            className=\"block md:hidden\"\r\n+            style={styles.continueButton}\r\n           >\r\n             Complete Order\r\n           </button>\r\n         </div>\r\n@@ -325,5 +325,17 @@\n     checkoutContainer: {\r\n       flexDirection: \"column\",\r\n     },\r\n   },\r\n+  continueButton: {\r\n+    backgroundColor: \"#000000\",\r\n+    color: \"#FFFFFF\",\r\n+    padding: \"10px 20px\",\r\n+    border: \"none\",\r\n+    cursor: \"pointer\",\r\n+    fontSize: \"0.9em\",\r\n+    fontWeight: \"bold\",\r\n+    width: \"100%\",\r\n+    marginTop: \"4px\",\r\n+    marginBottom: \"4px\",\r\n+  },\r\n };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747391796873,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -272,9 +272,16 @@\n           <OrderSummary order={order} />\r\n           <button\r\n             onClick={handlePlaceOrder}\r\n             className=\"block md:hidden\"\r\n-            style={styles.continueButton}\r\n+            style={{\r\n+              ...styles.continueButton,\r\n+              padding: \"18px 20px\",\r\n+              width: \"90%\",\r\n+              margin: \"32px auto 32px auto\",\r\n+              display: \"block\",\r\n+              borderRadius: \"4px\"\r\n+            }}\r\n           >\r\n             Complete Order\r\n           </button>\r\n         </div>\r\n"
                },
                {
                    "date": 1747391893897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -276,11 +276,11 @@\n             style={{\r\n               ...styles.continueButton,\r\n               padding: \"18px 20px\",\r\n               width: \"90%\",\r\n-              margin: \"32px auto 32px auto\",\r\n+              margin: \"40px auto 40px auto\",\r\n               display: \"block\",\r\n-              borderRadius: \"4px\"\r\n+              borderRadius: \"0\"\r\n             }}\r\n           >\r\n             Complete Order\r\n           </button>\r\n"
                },
                {
                    "date": 1747392128766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,8 +21,9 @@\n   const [isPromoApplied, setIsPromoApplied] = useState(false);\r\n   const [promoAmount, setPromoAmount] = useState(0);\r\n   const [promoCode, setPromoCode] = useState(\"\");\r\n   const [promoMessage, setPromoMessage] = useState(\"\");\r\n+  const [isMobile, setIsMobile] = useState(false);\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n     async function fetchUser() {\r\n@@ -40,8 +41,15 @@\n     }\r\n     fetchUser();\r\n   }, []);\r\n \r\n+  useEffect(() => {\r\n+    const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n+    checkMobile();\r\n+    window.addEventListener('resize', checkMobile);\r\n+    return () => window.removeEventListener('resize', checkMobile);\r\n+  }, []);\r\n+\r\n   if (!isMounted) return null;\r\n \r\n   const order = {\r\n     items: cartItems.map((item) => ({\r\n@@ -269,22 +277,23 @@\n           />\r\n         </div>\r\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n-          <button\r\n-            onClick={handlePlaceOrder}\r\n-            className=\"block md:hidden\"\r\n-            style={{\r\n-              ...styles.continueButton,\r\n-              padding: \"18px 20px\",\r\n-              width: \"90%\",\r\n-              margin: \"40px auto 40px auto\",\r\n-              display: \"block\",\r\n-              borderRadius: \"0\"\r\n-            }}\r\n-          >\r\n-            Complete Order\r\n-          </button>\r\n+          {isMobile && (\r\n+            <button\r\n+              onClick={handlePlaceOrder}\r\n+              style={{\r\n+                ...styles.continueButton,\r\n+                padding: \"18px 20px\",\r\n+                width: \"90%\",\r\n+                margin: \"40px auto 40px auto\",\r\n+                display: \"block\",\r\n+                borderRadius: \"0\"\r\n+              }}\r\n+            >\r\n+              Complete Order\r\n+            </button>\r\n+          )}\r\n         </div>\r\n       </div>\r\n     </div>\r\n   );\r\n"
                },
                {
                    "date": 1747392268577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -277,23 +277,8 @@\n           />\r\n         </div>\r\n         <div className=\"w-full md:w-1/3\">\r\n           <OrderSummary order={order} />\r\n-          {isMobile && (\r\n-            <button\r\n-              onClick={handlePlaceOrder}\r\n-              style={{\r\n-                ...styles.continueButton,\r\n-                padding: \"18px 20px\",\r\n-                width: \"90%\",\r\n-                margin: \"40px auto 40px auto\",\r\n-                display: \"block\",\r\n-                borderRadius: \"0\"\r\n-              }}\r\n-            >\r\n-              Complete Order\r\n-            </button>\r\n-          )}\r\n         </div>\r\n       </div>\r\n     </div>\r\n   );\r\n"
                },
                {
                    "date": 1748662053540,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,22 +25,35 @@\n   const [isMobile, setIsMobile] = useState(false);\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n+    const controller = new AbortController();\r\n+    const signal = controller.signal;\r\n+\r\n     async function fetchUser() {\r\n       try {\r\n-        const res = await fetch('/api/user/profile');\r\n+        const res = await fetch('/api/user/profile', { signal });\r\n         if (res.ok) {\r\n           const user = await res.json();\r\n           setUserEmail(user.email || \"\");\r\n         } else {\r\n           setUserEmail(\"\");\r\n         }\r\n-      } catch {\r\n-        setUserEmail(\"\");\r\n+      } catch (error) {\r\n+        if (error.name === 'AbortError') {\r\n+          console.log('Fetch aborted');\r\n+        } else {\r\n+          setUserEmail(\"\");\r\n+        }\r\n       }\r\n     }\r\n+\r\n     fetchUser();\r\n+\r\n+    return () => {\r\n+      // Abort the fetch request when the component unmounts\r\n+      controller.abort();\r\n+    };\r\n   }, []);\r\n \r\n   useEffect(() => {\r\n     const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n"
                },
                {
                    "date": 1748662209554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,35 +25,22 @@\n   const [isMobile, setIsMobile] = useState(false);\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n-    const controller = new AbortController();\r\n-    const signal = controller.signal;\r\n-\r\n     async function fetchUser() {\r\n       try {\r\n-        const res = await fetch('/api/user/profile', { signal });\r\n+        const res = await fetch('/api/user/profile');\r\n         if (res.ok) {\r\n           const user = await res.json();\r\n           setUserEmail(user.email || \"\");\r\n         } else {\r\n           setUserEmail(\"\");\r\n         }\r\n-      } catch (error) {\r\n-        if (error.name === 'AbortError') {\r\n-          console.log('Fetch aborted');\r\n-        } else {\r\n-          setUserEmail(\"\");\r\n-        }\r\n+      } catch {\r\n+        setUserEmail(\"\");\r\n       }\r\n     }\r\n-\r\n     fetchUser();\r\n-\r\n-    return () => {\r\n-      // Abort the fetch request when the component unmounts\r\n-      controller.abort();\r\n-    };\r\n   }, []);\r\n \r\n   useEffect(() => {\r\n     const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n"
                },
                {
                    "date": 1748662235491,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,22 +25,35 @@\n   const [isMobile, setIsMobile] = useState(false);\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n+    const controller = new AbortController();\r\n+    const signal = controller.signal;\r\n+\r\n     async function fetchUser() {\r\n       try {\r\n-        const res = await fetch('/api/user/profile');\r\n+        const res = await fetch('/api/user/profile', { signal });\r\n         if (res.ok) {\r\n           const user = await res.json();\r\n           setUserEmail(user.email || \"\");\r\n         } else {\r\n           setUserEmail(\"\");\r\n         }\r\n-      } catch {\r\n-        setUserEmail(\"\");\r\n+      } catch (error) {\r\n+        if (error.name === 'AbortError') {\r\n+          console.log('Fetch aborted');\r\n+        } else {\r\n+          setUserEmail(\"\");\r\n+        }\r\n       }\r\n     }\r\n+\r\n     fetchUser();\r\n+\r\n+    return () => {\r\n+      // Abort the fetch request when the component unmounts\r\n+      controller.abort();\r\n+    };\r\n   }, []);\r\n \r\n   useEffect(() => {\r\n     const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n"
                },
                {
                    "date": 1748662276059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,35 +25,22 @@\n   const [isMobile, setIsMobile] = useState(false);\r\n \r\n   useEffect(() => {\r\n     setIsMounted(true);\r\n-    const controller = new AbortController();\r\n-    const signal = controller.signal;\r\n-\r\n     async function fetchUser() {\r\n       try {\r\n-        const res = await fetch('/api/user/profile', { signal });\r\n+        const res = await fetch('/api/user/profile');\r\n         if (res.ok) {\r\n           const user = await res.json();\r\n           setUserEmail(user.email || \"\");\r\n         } else {\r\n           setUserEmail(\"\");\r\n         }\r\n-      } catch (error) {\r\n-        if (error.name === 'AbortError') {\r\n-          console.log('Fetch aborted');\r\n-        } else {\r\n-          setUserEmail(\"\");\r\n-        }\r\n+      } catch {\r\n+        setUserEmail(\"\");\r\n       }\r\n     }\r\n-\r\n     fetchUser();\r\n-\r\n-    return () => {\r\n-      // Abort the fetch request when the component unmounts\r\n-      controller.abort();\r\n-    };\r\n   }, []);\r\n \r\n   useEffect(() => {\r\n     const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n"
                },
                {
                    "date": 1748662304143,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,13 +92,19 @@\n     setShowPaymentDetails(true);\r\n   };\r\n \r\n   const handlePlaceOrder = async () => {\r\n+    setIsSubmitting(true);\r\n+    let response = null;\r\n+    let data = null;\r\n+\r\n     try {\r\n-      setIsSubmitting(true);\r\n-\r\n       // Lấy thông tin từ form\r\n-      const formData = new FormData(document.querySelector('form'));\r\n+      const form = document.querySelector('form');\r\n+      if (!form) {\r\n+        throw new Error(\"Form element not found.\");\r\n+      }\r\n+      const formData = new FormData(form);\r\n       const orderData = {\r\n         ...order,\r\n         userEmail,\r\n         address: formData.get('address') || \"\",\r\n@@ -108,35 +114,43 @@\n         province: formData.get('province') || \"\",\r\n         zipCode: formData.get('zipCode') || \"\",\r\n         country: formData.get('country') || \"\",\r\n         phone: formData.get('phone') || \"\",\r\n-        fullName: formData.get('firstName') + ' ' + formData.get('lastName'),\r\n-        email: formData.get('email') || \"\",\r\n+        fullName: `${formData.get('firstName') || ''} ${formData.get('lastName') || ''}`.trim(),\r\n+        email: formData.get('email') || \"\", // Sử dụng email từ form nếu có, nếu không dùng userEmail\r\n         additionalPhone: formData.get('additionalPhone') || \"\",\r\n+        paymentMethod: document.querySelector('input[name=\"paymentMethod\"]:checked')?.value || 'cod', // Lấy phương thức thanh toán đã chọn\r\n+        promoCode: localStorage.getItem('appliedPromoCode') || undefined,\r\n+        promoAmount: localStorage.getItem('promoAmount') ? parseFloat(localStorage.getItem('promoAmount')) : 0,\r\n       };\r\n \r\n       // Gửi đơn hàng lên server\r\n-      const response = await fetch('/api/orders', {\r\n+      response = await fetch('/api/orders', {\r\n         method: 'POST',\r\n         headers: {\r\n           'Content-Type': 'application/json',\r\n         },\r\n         body: JSON.stringify(orderData),\r\n       });\r\n \r\n-      const data = await response.json();\r\n+      data = await response.json();\r\n \r\n-      if (data.ok) {\r\n+      if (response.ok && data.ok) {\r\n         // Xóa giỏ hàng\r\n         clearCart();\r\n         // Chuyển hướng đến trang xác nhận đơn hàng\r\n-        router.push(`/order-confirmation/${data.orderId}`);\r\n+        // Delay một chút để đảm bảo state được cập nhật trước khi chuyển trang\r\n+        setTimeout(() => {\r\n+           router.push(`/order-success/${data.orderId}`);\r\n+        }, 0);\r\n+\r\n       } else {\r\n-        throw new Error(data.message);\r\n+        throw new Error(data.message || 'Có lỗi xảy ra khi đặt hàng.');\r\n       }\r\n     } catch (error) {\r\n       console.error('Error placing order:', error);\r\n-      alert('Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại.');\r\n+      // Hiển thị thông báo lỗi cho người dùng\r\n+      alert(error.message || 'Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại.');\r\n     } finally {\r\n       setIsSubmitting(false);\r\n     }\r\n   };\r\n"
                },
                {
                    "date": 1748662323055,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,8 +92,12 @@\n     setShowPaymentDetails(true);\r\n   };\r\n \r\n   const handlePlaceOrder = async () => {\r\n+    // Create AbortController for this specific fetch request\r\n+    const controller = new AbortController();\r\n+    const signal = controller.signal;\r\n+\r\n     setIsSubmitting(true);\r\n     let response = null;\r\n     let data = null;\r\n \r\n@@ -122,15 +126,16 @@\n         promoCode: localStorage.getItem('appliedPromoCode') || undefined,\r\n         promoAmount: localStorage.getItem('promoAmount') ? parseFloat(localStorage.getItem('promoAmount')) : 0,\r\n       };\r\n \r\n-      // Gửi đơn hàng lên server\r\n+      // Gửi đơn hàng lên server với signal từ AbortController\r\n       response = await fetch('/api/orders', {\r\n         method: 'POST',\r\n         headers: {\r\n           'Content-Type': 'application/json',\r\n         },\r\n         body: JSON.stringify(orderData),\r\n+        signal, // Attach the signal to the fetch request\r\n       });\r\n \r\n       data = await response.json();\r\n \r\n@@ -146,13 +151,20 @@\n       } else {\r\n         throw new Error(data.message || 'Có lỗi xảy ra khi đặt hàng.');\r\n       }\r\n     } catch (error) {\r\n-      console.error('Error placing order:', error);\r\n-      // Hiển thị thông báo lỗi cho người dùng\r\n-      alert(error.message || 'Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại.');\r\n+      // Check if the error is due to abortion\r\n+      if (error.name === 'AbortError') {\r\n+        console.log('Order placement fetch aborted due to navigation.');\r\n+      } else {\r\n+        console.error('Error placing order:', error);\r\n+        // Hiển thị thông báo lỗi cho người dùng\r\n+        alert(error.message || 'Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại.');\r\n+      }\r\n     } finally {\r\n+      // Ensure isSubmitting is set to false regardless of success or failure\r\n       setIsSubmitting(false);\r\n+      // No need to abort controller here, it's for the specific fetch call\r\n     }\r\n   };\r\n \r\n   const handleAdditionalContactToggle = () => {\r\n"
                },
                {
                    "date": 1748662329105,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,23 +92,13 @@\n     setShowPaymentDetails(true);\r\n   };\r\n \r\n   const handlePlaceOrder = async () => {\r\n-    // Create AbortController for this specific fetch request\r\n-    const controller = new AbortController();\r\n-    const signal = controller.signal;\r\n+    try {\r\n+      setIsSubmitting(true);\r\n \r\n-    setIsSubmitting(true);\r\n-    let response = null;\r\n-    let data = null;\r\n-\r\n-    try {\r\n       // Lấy thông tin từ form\r\n-      const form = document.querySelector('form');\r\n-      if (!form) {\r\n-        throw new Error(\"Form element not found.\");\r\n-      }\r\n-      const formData = new FormData(form);\r\n+      const formData = new FormData(document.querySelector('form'));\r\n       const orderData = {\r\n         ...order,\r\n         userEmail,\r\n         address: formData.get('address') || \"\",\r\n@@ -118,53 +108,37 @@\n         province: formData.get('province') || \"\",\r\n         zipCode: formData.get('zipCode') || \"\",\r\n         country: formData.get('country') || \"\",\r\n         phone: formData.get('phone') || \"\",\r\n-        fullName: `${formData.get('firstName') || ''} ${formData.get('lastName') || ''}`.trim(),\r\n-        email: formData.get('email') || \"\", // Sử dụng email từ form nếu có, nếu không dùng userEmail\r\n+        fullName: formData.get('firstName') + ' ' + formData.get('lastName'),\r\n+        email: formData.get('email') || \"\",\r\n         additionalPhone: formData.get('additionalPhone') || \"\",\r\n-        paymentMethod: document.querySelector('input[name=\"paymentMethod\"]:checked')?.value || 'cod', // Lấy phương thức thanh toán đã chọn\r\n-        promoCode: localStorage.getItem('appliedPromoCode') || undefined,\r\n-        promoAmount: localStorage.getItem('promoAmount') ? parseFloat(localStorage.getItem('promoAmount')) : 0,\r\n       };\r\n \r\n-      // Gửi đơn hàng lên server với signal từ AbortController\r\n-      response = await fetch('/api/orders', {\r\n+      // Gửi đơn hàng lên server\r\n+      const response = await fetch('/api/orders', {\r\n         method: 'POST',\r\n         headers: {\r\n           'Content-Type': 'application/json',\r\n         },\r\n         body: JSON.stringify(orderData),\r\n-        signal, // Attach the signal to the fetch request\r\n       });\r\n \r\n-      data = await response.json();\r\n+      const data = await response.json();\r\n \r\n-      if (response.ok && data.ok) {\r\n+      if (data.ok) {\r\n         // Xóa giỏ hàng\r\n         clearCart();\r\n         // Chuyển hướng đến trang xác nhận đơn hàng\r\n-        // Delay một chút để đảm bảo state được cập nhật trước khi chuyển trang\r\n-        setTimeout(() => {\r\n-           router.push(`/order-success/${data.orderId}`);\r\n-        }, 0);\r\n-\r\n+        router.push(`/order-confirmation/${data.orderId}`);\r\n       } else {\r\n-        throw new Error(data.message || 'Có lỗi xảy ra khi đặt hàng.');\r\n+        throw new Error(data.message);\r\n       }\r\n     } catch (error) {\r\n-      // Check if the error is due to abortion\r\n-      if (error.name === 'AbortError') {\r\n-        console.log('Order placement fetch aborted due to navigation.');\r\n-      } else {\r\n-        console.error('Error placing order:', error);\r\n-        // Hiển thị thông báo lỗi cho người dùng\r\n-        alert(error.message || 'Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại.');\r\n-      }\r\n+      console.error('Error placing order:', error);\r\n+      alert('Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại.');\r\n     } finally {\r\n-      // Ensure isSubmitting is set to false regardless of success or failure\r\n       setIsSubmitting(false);\r\n-      // No need to abort controller here, it's for the specific fetch call\r\n     }\r\n   };\r\n \r\n   const handleAdditionalContactToggle = () => {\r\n"
                },
                {
                    "date": 1748662756566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,15 +41,8 @@\n     }\r\n     fetchUser();\r\n   }, []);\r\n \r\n-  useEffect(() => {\r\n-    const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n-    checkMobile();\r\n-    window.addEventListener('resize', checkMobile);\r\n-    return () => window.removeEventListener('resize', checkMobile);\r\n-  }, []);\r\n-\r\n   if (!isMounted) return null;\r\n \r\n   const order = {\r\n     items: cartItems.map((item) => ({\r\n"
                },
                {
                    "date": 1748662840878,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,8 +41,15 @@\n     }\r\n     fetchUser();\r\n   }, []);\r\n \r\n+  useEffect(() => {\r\n+    const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n+    checkMobile();\r\n+    window.addEventListener('resize', checkMobile);\r\n+    return () => window.removeEventListener('resize', checkMobile);\r\n+  }, []);\r\n+\r\n   if (!isMounted) return null;\r\n \r\n   const order = {\r\n     items: cartItems.map((item) => ({\r\n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "\"use client\";\r\nimport { useState } from \"react\";\r\nimport { useCart } from \"../../context/CartContext\";\r\nimport ShippingPage from \"./shipping/page\";\r\nimport OrderSummary from \"./summary/page\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function Checkout() {\r\n  const { cartItems, clearCart } = useCart();\r\n  const router = useRouter();\r\n  const userEmail = \"dichth03@gmail.com\";\r\n\r\n  const [isShippingComplete, setIsShippingComplete] = useState(false);\r\n  const [showAdditionalContact, setShowAdditionalContact] = useState(false);\r\n  const [showPaymentDetails, setShowPaymentDetails] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const order = {\r\n    items: cartItems.map((item) => ({\r\n      name: item.name,\r\n      quantity: item.quantity,\r\n      color: item.color || \"Unknown\",\r\n      size: item.size || \"Unknown\",\r\n      price: `AU$ ${item.price.toFixed(2)}`,\r\n      image: item.image || \"/images/image1.jpg\",\r\n    })),\r\n    subtotal: `AU$ ${cartItems\r\n      .reduce((total, item) => total + item.price * item.quantity, 0)\r\n      .toFixed(2)}`,\r\n    shipping: \"Free (Express)\",\r\n    gst: `AU$ ${(cartItems.reduce((total, item) => total + item.price * item.quantity, 0) * 0.1).toFixed(2)}`,\r\n    total: `AU$ ${cartItems\r\n      .reduce((total, item) => total + item.price * item.quantity, 0)\r\n      .toFixed(2)}`,\r\n  };\r\n\r\n  const validateInputs = () => {\r\n    const newErrors = {};\r\n    const inputs = document.querySelectorAll('input[required], select[required]');\r\n    inputs.forEach((input) => {\r\n      if (!input.value.trim()) {\r\n        newErrors[input.name || input.type] = true;\r\n      }\r\n    });\r\n    return newErrors;\r\n  };\r\n\r\n  const handleShippingComplete = async () => {\r\n    const validationErrors = validateInputs();\r\n    if (Object.keys(validationErrors).length > 0) {\r\n      setErrors(validationErrors);\r\n      return;\r\n    }\r\n\r\n    setErrors({});\r\n    setIsShippingComplete(true);\r\n    setShowPaymentDetails(true);\r\n  };\r\n\r\n  const handlePlaceOrder = async () => {\r\n    try {\r\n      setIsSubmitting(true);\r\n\r\n      // Lấy thông tin từ form\r\n      const formData = new FormData(document.querySelector('form'));\r\n      const contactInfo = {\r\n        firstName: formData.get('firstName'),\r\n        lastName: formData.get('lastName'),\r\n        email: formData.get('email'),\r\n        phone: formData.get('phone'),\r\n        address: formData.get('address'),\r\n        city: formData.get('city'),\r\n        state: formData.get('state'),\r\n        zipCode: formData.get('zipCode'),\r\n        country: formData.get('country'),\r\n      };\r\n\r\n      // Tạo đơn hàng\r\n      const orderData = {\r\n        ...order,\r\n        contactInfo,\r\n        userEmail,\r\n      };\r\n\r\n      // Gửi đơn hàng lên server\r\n      const response = await fetch('/api/orders', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(orderData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.ok) {\r\n        // Xóa giỏ hàng\r\n        clearCart();\r\n        // Chuyển hướng đến trang xác nhận đơn hàng\r\n        router.push(`/order-confirmation/${data.orderId}`);\r\n      } else {\r\n        throw new Error(data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error placing order:', error);\r\n      alert('Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleAdditionalContactToggle = () => {\r\n    setShowAdditionalContact(!showAdditionalContact);\r\n  };\r\n\r\n  if (cartItems.length === 0) {\r\n    return (\r\n      <div style={{ backgroundColor: \"#FFFFFF\", minHeight: \"100vh\" }}>\r\n        <div style={styles.navbar}>\r\n          <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n        </div>\r\n        <div className=\"text-center\" style={{ paddingTop: \"60px\", paddingBottom: \"60px\" }}>\r\n          <h1 style={{\r\n            fontSize: \"1.5em\",\r\n            fontWeight: \"bold\",\r\n            marginBottom: \"20px\",\r\n            color: \"#000000\",\r\n            textTransform: \"uppercase\",\r\n            borderBottom: \"2px solid #000000\",\r\n            display: \"inline-block\",\r\n            paddingBottom: \"5px\"\r\n          }}>\r\n            CHECKOUT\r\n          </h1>\r\n          <p style={{ \r\n            fontSize: \"1em\", \r\n            color: \"#000000\", \r\n            marginTop: \"20px\",\r\n            marginBottom: \"20px\" \r\n          }}>\r\n            Bạn không có sản phẩm nào trong shopping bag cả.\r\n          </p>\r\n          <button\r\n            onClick={() => router.push('/products')}\r\n            style={{\r\n              backgroundColor: \"#000000\",\r\n              color: \"#FFFFFF\",\r\n              padding: \"10px 20px\",\r\n              border: \"none\",\r\n              cursor: \"pointer\",\r\n              fontSize: \"0.9em\"\r\n            }}\r\n          >\r\n            Khám phá sản phẩm\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ ...styles.pageContainer, backgroundColor: \"#FFFFFF\" }}>\r\n      <div style={styles.navbar}>\r\n        <h1 style={{ margin: 0, color: \"black\", fontSize: \"0.9em\" }}>Menu</h1>\r\n      </div>\r\n      <div style={styles.backButtonContainer}>\r\n        <Link href=\"/cart\" style={styles.backButton}>\r\n          &lt; Back to Shopping Bag\r\n        </Link>\r\n      </div>\r\n      <div style={styles.checkoutContainer}>\r\n        <ShippingPage\r\n          userEmail={userEmail}\r\n          isShippingComplete={isShippingComplete}\r\n          showAdditionalContact={showAdditionalContact}\r\n          showPaymentDetails={showPaymentDetails}\r\n          errors={errors}\r\n          handleShippingComplete={handleShippingComplete}\r\n          handleAdditionalContactToggle={handleAdditionalContactToggle}\r\n          handlePlaceOrder={handlePlaceOrder}\r\n          isSubmitting={isSubmitting}\r\n          order={order}\r\n        />\r\n        <OrderSummary order={order} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  pageContainer: {\r\n    backgroundColor: \"#ffffff\",\r\n    minHeight: \"100vh\",\r\n    color: \"#000000\",\r\n    fontSize: \"0.85em\",\r\n  },\r\n  navbar: {\r\n    backgroundColor: \"#f1f1f1\",\r\n    height: \"50px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    padding: \"0 20px\",\r\n    borderBottom: \"1px solid #e0e0e0\",\r\n    color: \"#000000\",\r\n  },\r\n  backButtonContainer: {\r\n    maxWidth: \"1200px\",\r\n    margin: \"20px auto\",\r\n    padding: \"0 0 0 0\",\r\n  },\r\n  backButton: {\r\n    fontSize: \"0.85em\",\r\n    color: \"#000000\",\r\n    textDecoration: \"underline\",\r\n    cursor: \"pointer\",\r\n    fontWeight: \"bold\",\r\n    transition: \"opacity 0.3s ease\",\r\n  },\r\n  checkoutContainer: {\r\n    display: \"flex\",\r\n    maxWidth: \"1200px\",\r\n    margin: \"20px auto\",\r\n    gap: \"20px\",\r\n    padding: \"20px\",\r\n    backgroundColor: \"#ffffff\",\r\n    color: \"#000000\",\r\n  },\r\n  \"@media (maxWidth: 768px)\": {\r\n    checkoutContainer: {\r\n      flexDirection: \"column\",\r\n    },\r\n  },\r\n};"
        }
    ]
}