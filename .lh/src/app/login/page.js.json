{
    "sourceFile": "src/app/login/page.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1746893162945,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746903970033,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,8 @@\n \"use client\";\r\n import { useState } from \"react\";\r\n import { useRouter } from \"next/navigation\";\r\n import { FcGoogle } from \"react-icons/fc\";\r\n-import { FaApple } from \"react-icons/fa\";\r\n import { motion } from \"framer-motion\";\r\n \r\n export default function LoginPage() {\r\n   const router = useRouter();\r\n@@ -52,11 +51,8 @@\n       <div className=\"w-full max-w-xs flex flex-col gap-4\">\r\n         <button className=\"flex items-center justify-center w-full border border-black text-black py-2 rounded-full text-sm font-semibold hover:bg-gray-100 transition\">\r\n           <FcGoogle className=\"text-3xl mr-2\" /> CONTINUE WITH GOOGLE\r\n         </button>\r\n-        <button className=\"flex items-center justify-center w-full border border-black text-black py-2 rounded-full text-sm font-semibold hover:bg-gray-100 transition\">\r\n-          <FaApple className=\"text-3xl mr-2\" /> CONTINUE WITH APPLE\r\n-        </button>\r\n \r\n         {/* Dòng OR */}\r\n         <div className=\"flex items-center justify-center mt-3\">\r\n           <span className=\"text-black font-semibold\">OR</span>\r\n"
                },
                {
                    "date": 1746904126373,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { useState } from \"react\";\r\n import { useRouter } from \"next/navigation\";\r\n import { FcGoogle } from \"react-icons/fc\";\r\n import { motion } from \"framer-motion\";\r\n+import { signIn } from \"next-auth/react\";\r\n \r\n export default function LoginPage() {\r\n   const router = useRouter();\r\n   const [isFocused, setIsFocused] = useState(false);\r\n@@ -17,8 +18,20 @@\n   const isValidEmail = (email) => {\r\n     return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n   };\r\n \r\n+  // Xử lý đăng nhập bằng Google\r\n+  const handleGoogleSignIn = async () => {\r\n+    try {\r\n+      const result = await signIn(\"google\", { redirect: false });\r\n+      if (result?.error) {\r\n+        setError(\"Failed to sign in with Google\");\r\n+      }\r\n+    } catch (error) {\r\n+      setError(\"An error occurred during sign in\");\r\n+    }\r\n+  };\r\n+\r\n   // Xử lý khi nhấn CONTINUE\r\n   const handleContinue = () => {\r\n     if (!email) {\r\n       setError(\"Please enter a valid email address\");\r\n@@ -48,9 +61,12 @@\n       </h1>\r\n \r\n       {/* Nút đăng nhập */}\r\n       <div className=\"w-full max-w-xs flex flex-col gap-4\">\r\n-        <button className=\"flex items-center justify-center w-full border border-black text-black py-2 rounded-full text-sm font-semibold hover:bg-gray-100 transition\">\r\n+        <button \r\n+          onClick={handleGoogleSignIn}\r\n+          className=\"flex items-center justify-center w-full border border-black text-black py-2 rounded-full text-sm font-semibold hover:bg-gray-100 transition\"\r\n+        >\r\n           <FcGoogle className=\"text-3xl mr-2\" /> CONTINUE WITH GOOGLE\r\n         </button>\r\n \r\n         {/* Dòng OR */}\r\n"
                }
            ],
            "date": 1746891704042,
            "name": "cart",
            "content": "\"use client\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { FcGoogle } from \"react-icons/fc\";\r\nimport { FaApple } from \"react-icons/fa\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Giả lập danh sách email đã đăng ký\r\n  const registeredEmails = [\"test@example.com\", \"user@gmail.com\"];\r\n\r\n  // Hàm kiểm tra định dạng email\r\n  const isValidEmail = (email) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n  };\r\n\r\n  // Xử lý khi nhấn CONTINUE\r\n  const handleContinue = () => {\r\n    if (!email) {\r\n      setError(\"Please enter a valid email address\");\r\n      return;\r\n    }\r\n\r\n    if (!isValidEmail(email)) {\r\n      setError(\"Invalid email format\");\r\n      return;\r\n    }\r\n\r\n    setError(\"\"); // Xóa lỗi nếu email hợp lệ\r\n\r\n    // Kiểm tra email có tồn tại hay không\r\n    if (registeredEmails.includes(email)) {\r\n      router.push(\"/dashboard\"); // Nếu có tài khoản, chuyển vào dashboard\r\n    } else {\r\n      router.push(`/register?email=${email}`); // Nếu chưa có, chuyển sang đăng ký\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white flex flex-col items-center pt-20\">\r\n      {/* Tiêu đề */}\r\n      <h1 className=\"text-5xl font-bold text-black text-center my-8 tracking-wide\">\r\n        MY AISH ACCOUNT\r\n      </h1>\r\n\r\n      {/* Nút đăng nhập */}\r\n      <div className=\"w-full max-w-xs flex flex-col gap-4\">\r\n        <button className=\"flex items-center justify-center w-full border border-black text-black py-2 rounded-full text-sm font-semibold hover:bg-gray-100 transition\">\r\n          <FcGoogle className=\"text-3xl mr-2\" /> CONTINUE WITH GOOGLE\r\n        </button>\r\n        <button className=\"flex items-center justify-center w-full border border-black text-black py-2 rounded-full text-sm font-semibold hover:bg-gray-100 transition\">\r\n          <FaApple className=\"text-3xl mr-2\" /> CONTINUE WITH APPLE\r\n        </button>\r\n\r\n        {/* Dòng OR */}\r\n        <div className=\"flex items-center justify-center mt-3\">\r\n          <span className=\"text-black font-semibold\">OR</span>\r\n        </div>\r\n\r\n        {/* Dòng tiếp tục bằng email */}\r\n        <div className=\"flex justify-center w-full\">\r\n          <h2 className=\"text-black text-3xl font-semibold text-center whitespace-nowrap\">\r\n            CONTINUE WITH YOUR EMAIL ADDRESS\r\n          </h2>\r\n        </div>\r\n        <div className=\"flex justify-center w-full text-center px-4 whitespace-nowrap\">\r\n          <p className=\"text-black text-xs font-semibold\">\r\n            Sign in with your email and password or create a profile if you are new\r\n          </p>\r\n        </div>\r\n\r\n        {/* Ô nhập email */}\r\n        <div className=\"relative w-full mt-4\">\r\n          {/* Label động */}\r\n          <motion.label\r\n            className={`absolute text-sm bg-white px-1 left-4 ${error ? \"text-red-500\" : \"text-gray-500\"}`}\r\n            animate={{\r\n              top: isFocused || email ? \"4px\" : \"40%\",\r\n              left: \"8px\",\r\n              scale: isFocused || email ? 0.75 : 1,\r\n              translateY: isFocused || email ? \"0\" : \"-50%\",\r\n            }}\r\n            transition={{ duration: 0.2, ease: \"easeOut\" }}\r\n          >\r\n            EMAIL*\r\n          </motion.label>\r\n\r\n          {/* Input */}\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            onFocus={() => setIsFocused(true)}\r\n            onBlur={() => {\r\n              setIsFocused(false); // Reset isFocused khi rời input\r\n              if (!email || !isValidEmail(email)) {\r\n                setError(\"Please enter a valid email address\");\r\n              } else {\r\n                setError(\"\");\r\n              }\r\n            }}\r\n            className={`w-full px-4 pt-6 pb-2 text-base text-black border rounded-md focus:outline-none focus:ring-2 ${\r\n              error ? \"border-red-500 focus:ring-red-500\" : \"border-gray-300 focus:ring-black\"\r\n            }`}\r\n          />\r\n          {/* Hiển thị lỗi nếu có */}\r\n          {error && <p className=\"text-red-500 text-xs mt-1\">{error}</p>}\r\n        </div>\r\n\r\n        {/* Nút CONTINUE */}\r\n        <button\r\n          onClick={handleContinue}\r\n          className=\"w-full max-w-[325px] bg-black text-white py-3 rounded-md font-semibold mt-1 hover:bg-gray-800 transition\"\r\n        >\r\n          CONTINUE\r\n        </button>\r\n\r\n        {/* Dòng JOIN MY AISH */}\r\n        <div className=\"mt-15 mb-12 text-black font-semibold text-2xl text-center\">\r\n          JOIN MY AISH\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"
        }
    ]
}