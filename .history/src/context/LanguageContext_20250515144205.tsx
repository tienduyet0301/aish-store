"use client";

import React, { createContext, useContext, useState, useEffect } from "react";
import { useRouter } from "next/navigation";

type Language = 'en' | 'vi';

type TranslationKey = 
  // Common
  | 'common.login'
  | 'common.register'
  | 'common.continue'
  | 'common.back'
  | 'common.email'
  | 'common.password'
  | 'common.firstName'
  | 'common.lastName'
  | 'common.dateOfBirth'
  | 'common.month'
  | 'common.day'
  | 'common.year'
  | 'common.forgotPassword'
  | 'common.sendNewPassword'
  | 'common.sending'
  | 'common.continueWithGoogle'
  | 'common.continueWithEmail'
  | 'common.signInWithEmail'
  | 'common.or'
  | 'common.joinMyAish'
  | 'common.myAishAccount'
  | 'common.forgotPasswordText'
  | 'common.backToLogin'
  | 'common.english'
  | 'common.vietnamese'
  | 'common.contact'
  | 'common.follow'
  | 'common.service'
  | 'common.about'
  | 'common.language'
  | 'common.returnPolicy'
  | 'common.warrantyPolicy'
  | 'common.careInstructions'
  // Search
  | 'search.placeholder'
  | 'search.cancel'
  | 'search.noResults'
  | 'search.error'
  // Navbar
  | 'navbar.search'
  | 'navbar.cart'
  | 'navbar.wishlist'
  | 'navbar.account'
  | 'navbar.menu'
  | 'navbar.all'
  | 'navbar.store'
  | 'navbar.tops'
  | 'navbar.tshirt'
  | 'navbar.shirt'
  | 'navbar.polo'
  | 'navbar.sweater'
  | 'navbar.hoodie'
  | 'navbar.bottoms'
  | 'navbar.pants'
  | 'navbar.short'
  | 'navbar.skirt'
  | 'navbar.accessories'
  | 'navbar.cap'
  | 'navbar.keychain'
  | 'navbar.towel'
  | 'navbar.collection'
  | 'navbar.acceptProblem'
  | 'navbar.backToSummer'
  | 'navbar.chillCalmDown'
  | 'navbar.aboutUs'
  | 'navbar.thankYou'
  | 'navbar.thankYouMobile'
  // Home
  | 'home.hero.title'
  | 'home.hero.subtitle'
  | 'home.hero.cta'
  | 'home.featured.title'
  | 'home.featured.viewAll'
  | 'home.categories.title'
  | 'home.categories.viewAll'
  // Product
  | 'product.addToCart'
  | 'product.addToWishlist'
  | 'product.removeFromWishlist'
  | 'product.size'
  | 'product.color'
  | 'product.quantity'
  | 'product.description'
  | 'product.details'
  | 'product.shipping'
  | 'product.returns'
  | 'product.noImage'
  | 'product.unnamed'
  | 'product.soldOut'
  | 'product.shopThis'
  // Cart
  | 'cart.title'
  | 'cart.empty'
  | 'cart.continueShopping'
  | 'cart.subtotal'
  | 'cart.shipping'
  | 'cart.total'
  | 'cart.checkout'
  | 'cart.remove'
  | 'cart.update'
  | 'cart.viewCart'
  // Checkout
  | 'checkout.title'
  | 'checkout.shipping'
  | 'checkout.payment'
  | 'checkout.review'
  | 'checkout.placeOrder'
  | 'checkout.address'
  | 'checkout.city'
  | 'checkout.country'
  | 'checkout.phone'
  | 'checkout.cardNumber'
  | 'checkout.expiry'
  | 'checkout.cvv'
  // Validation
  | 'validation.requiredEmail'
  | 'validation.requiredPassword'
  | 'validation.requiredFirstName'
  | 'validation.requiredLastName'
  | 'validation.requiredDate'
  | 'validation.requiredUpdates'
  | 'validation.invalidEmail'
  // Updates
  | 'updates.title'
  | 'updates.description'
  // Care Instructions
  | 'care.title'
  | 'care.description'
  | 'care.washing.title'
  | 'care.washing.tip1'
  | 'care.washing.tip2'
  | 'care.washing.tip3'
  | 'care.washing.tip4'
  | 'care.drying.title'
  | 'care.drying.tip1'
  | 'care.drying.tip2'
  | 'care.drying.tip3'
  | 'care.ironing.title'
  | 'care.ironing.tip1'
  | 'care.ironing.tip2'
  | 'care.ironing.tip3'
  | 'care.storage.title'
  | 'care.storage.tip1'
  | 'care.storage.tip2'
  | 'care.storage.tip3'
  | 'care.footer';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: TranslationKey) => string;
}

type Translations = {
  [key in Language]: {
    [key in TranslationKey]: string;
  };
};

const translations: Translations = {
  en: {
    // Common
    'common.login': 'LOGIN',
    'common.register': 'REGISTER',
    'common.continue': 'CONTINUE',
    'common.back': 'Back',
    'common.email': 'EMAIL*',
    'common.password': 'PASSWORD*',
    'common.firstName': 'FIRST NAME*',
    'common.lastName': 'LAST NAME*',
    'common.dateOfBirth': 'DATE OF BIRTH',
    'common.month': 'MONTH*',
    'common.day': 'DAY*',
    'common.year': 'YEAR*',
    'common.forgotPassword': 'FORGOT PASSWORD',
    'common.sendNewPassword': 'Send new password',
    'common.sending': 'Sending...',
    'common.continueWithGoogle': 'CONTINUE WITH GOOGLE',
    'common.continueWithEmail': 'CONTINUE WITH YOUR EMAIL ADDRESS',
    'common.signInWithEmail': 'Sign in with your email and password or create a profile if you are new',
    'common.or': 'OR',
    'common.joinMyAish': 'JOIN MY AISH',
    'common.myAishAccount': 'MY AISH ACCOUNT',
    'common.forgotPasswordText': "Don't worry! It happens. Please enter your email address and we'll send you a new password.",
    'common.backToLogin': 'Back to login',
    'common.english': 'ENGLISH',
    'common.vietnamese': 'VIETNAMESE',
    'common.contact': 'CONTACT US',
    'common.follow': 'FOLLOW US',
    'common.service': 'SERVICE',
    'common.about': 'ABOUT AISH',
    'common.language': 'LANGUAGE',
    'common.returnPolicy': 'RETURN POLICY',
    'common.warrantyPolicy': 'WARRANTY POLICY',
    'common.careInstructions': 'CARE INSTRUCTIONS',
    // Search
    'search.placeholder': 'What are you looking for?',
    'search.cancel': 'Cancel',
    'search.noResults': 'No products found',
    'search.error': 'Unable to search products',
    // Navbar
    'navbar.search': 'SEARCH',
    'navbar.cart': 'CART',
    'navbar.wishlist': 'WISHLIST',
    'navbar.account': 'ACCOUNT',
    'navbar.menu': 'MENU',
    'navbar.all': 'ALL',
    'navbar.store': 'STORE',
    'navbar.tops': 'TOPS',
    'navbar.tshirt': 'TSHIRT',
    'navbar.shirt': 'SHIRT',
    'navbar.polo': 'POLO',
    'navbar.sweater': 'SWEATER',
    'navbar.hoodie': 'HOODIE',
    'navbar.bottoms': 'BOTTOMS',
    'navbar.pants': 'PANTS',
    'navbar.short': 'SHORT',
    'navbar.skirt': 'SKIRT',
    'navbar.accessories': 'ACCESSORIES',
    'navbar.cap': 'CAP',
    'navbar.keychain': 'KEYCHAIN',
    'navbar.towel': 'TOWEL',
    'navbar.collection': 'COLLECTION',
    'navbar.acceptProblem': 'ACCEPT THE PROBLEM',
    'navbar.backToSummer': 'BACK TO SUMMER',
    'navbar.chillCalmDown': 'CHILL, CALM DOWN',
    'navbar.aboutUs': 'ABOUT US',
    'navbar.thankYou': 'Thank you for choosing AISH. We truly appreciate it.',
    'navbar.thankYouMobile': 'We truly appreciate it.',
    // Home
    'home.hero.title': 'DISCOVER YOUR STYLE',
    'home.hero.subtitle': 'Explore our latest collection',
    'home.hero.cta': 'SHOP NOW',
    'home.featured.title': 'FEATURED PRODUCTS',
    'home.featured.viewAll': 'VIEW ALL',
    'home.categories.title': 'SHOP BY CATEGORY',
    'home.categories.viewAll': 'VIEW ALL',
    // Product
    'product.addToCart': 'ADD TO CART',
    'product.addToWishlist': 'ADD TO WISHLIST',
    'product.removeFromWishlist': 'REMOVE FROM WISHLIST',
    'product.size': 'SIZE',
    'product.color': 'COLOR',
    'product.quantity': 'QUANTITY',
    'product.description': 'DESCRIPTION',
    'product.details': 'DETAILS',
    'product.shipping': 'SHIPPING',
    'product.returns': 'RETURNS',
    'product.noImage': 'No image',
    'product.unnamed': 'Unnamed product',
    'product.soldOut': 'SOLD OUT',
    'product.shopThis': 'SHOP THIS',
    // Cart
    'cart.title': 'YOUR CART',
    'cart.empty': 'Your cart is empty!',
    'cart.continueShopping': 'CONTINUE SHOPPING',
    'cart.subtotal': 'SUBTOTAL',
    'cart.shipping': 'SHIPPING',
    'cart.total': 'TOTAL',
    'cart.checkout': 'CHECKOUT',
    'cart.remove': 'REMOVE',
    'cart.update': 'UPDATE',
    'cart.viewCart': 'VIEW CART',
    // Checkout
    'checkout.title': 'CHECKOUT',
    'checkout.shipping': 'SHIPPING INFORMATION',
    'checkout.payment': 'PAYMENT METHOD',
    'checkout.review': 'REVIEW ORDER',
    'checkout.placeOrder': 'PLACE ORDER',
    'checkout.address': 'ADDRESS',
    'checkout.city': 'CITY',
    'checkout.country': 'COUNTRY',
    'checkout.phone': 'PHONE',
    'checkout.cardNumber': 'CARD NUMBER',
    'checkout.expiry': 'EXPIRY DATE',
    'checkout.cvv': 'CVV',
    // Validation
    'validation.requiredEmail': 'Please enter a valid email address',
    'validation.requiredPassword': 'Please enter a valid password',
    'validation.requiredFirstName': 'Please enter your first name',
    'validation.requiredLastName': 'Please enter your last name',
    'validation.requiredDate': 'Please enter your full date of birth',
    'validation.requiredUpdates': 'You must agree to receive updates',
    'validation.invalidEmail': 'Invalid email format',
    // Updates
    'updates.title': 'I would like to receive updates',
    'updates.description': 'I would like to receive updates (including by email, SMS, MMS, social media, phone...) about AISH new activities, exclusive products, tailored services and to have a personalised client experience based on my interests.',
    // Care Instructions
    'care.title': 'CARE INSTRUCTIONS',
    'care.description': 'Follow these guidelines to maintain the quality and longevity of your AISH products.',
    'care.washing.title': 'WASHING',
    'care.washing.tip1': 'Machine wash cold (30Â°C) with similar colors',
    'care.washing.tip2': 'Use mild detergent and avoid bleach',
    'care.washing.tip3': 'Turn garments inside out before washing',
    'care.washing.tip4': 'Do not soak for extended periods',
    'care.drying.title': 'DRYING',
    'care.drying.tip1': 'Tumble dry on low heat',
    'care.drying.tip2': 'Remove promptly when dry',
    'care.drying.tip3': 'Avoid direct sunlight',
    'care.ironing.title': 'IRONING',
    'care.ironing.tip1': 'Iron on reverse side',
    'care.ironing.tip2': 'Use low to medium heat',
    'care.ironing.tip3': 'Do not iron over prints or embellishments',
    'care.storage.title': 'STORAGE',
    'care.storage.tip1': 'Store in a cool, dry place',
    'care.storage.tip2': 'Keep away from direct sunlight',
    'care.storage.tip3': 'Fold neatly to prevent wrinkles',
    'care.footer': 'For specific care instructions, please refer to the care label on your garment.'
  },
  vi: {
    // Common
    'common.login': 'ÄÄNG NHáº¬P',
    'common.register': 'ÄÄNG KÃ',
    'common.continue': 'TIáº¾P Tá»¤C',
    'common.back': 'Quay láº¡i',
    'common.email': 'EMAIL*',
    'common.password': 'Máº¬T KHáº¨U*',
    'common.firstName': 'TÃN*',
    'common.lastName': 'Há»*',
    'common.dateOfBirth': 'NGÃY SINH',
    'common.month': 'THÃNG*',
    'common.day': 'NGÃY*',
    'common.year': 'NÄM*',
    'common.forgotPassword': 'QUÃN Máº¬T KHáº¨U',
    'common.sendNewPassword': 'Gá»­i máº­t kháº©u má»i',
    'common.sending': 'Äang gá»­i...',
    'common.continueWithGoogle': 'TIáº¾P Tá»¤C Vá»I GOOGLE',
    'common.continueWithEmail': 'TIáº¾P Tá»¤C Vá»I EMAIL Cá»¦A Báº N',
    'common.signInWithEmail': 'ÄÄng nháº­p báº±ng email vÃ  máº­t kháº©u hoáº·c táº¡o há» sÆ¡ má»i náº¿u báº¡n chÆ°a cÃ³',
    'common.or': 'HOáº¶C',
    'common.joinMyAish': 'THAM GIA MY AISH',
    'common.myAishAccount': 'TÃI KHOáº¢N MY AISH',
    'common.forgotPasswordText': 'Äá»«ng lo! Chuyá»n nÃ y thÆ°á»ng xáº£y ra. Vui lÃ²ng nháº­p Äá»a chá» email cá»§a báº¡n vÃ  chÃºng tÃ´i sáº½ gá»­i cho báº¡n máº­t kháº©u má»i.',
    'common.backToLogin': 'Quay láº¡i ÄÄng nháº­p',
    'common.english': 'ENGLISH',
    'common.vietnamese': 'TIáº¾NG VIá»T',
    'common.contact': 'LIÃN Há»',
    'common.follow': 'THEO DÃI',
    'common.service': 'Dá»CH Vá»¤',
    'common.about': 'Vá» AISH',
    'common.language': 'NGÃN NGá»®',
    'common.returnPolicy': 'CHÃNH SÃCH Äá»I TRáº¢',
    'common.warrantyPolicy': 'CHÃNH SÃCH Báº¢O HÃNH',
    'common.careInstructions': 'HÆ¯á»NG DáºªN Báº¢O QUáº¢N',
    // Search
    'search.placeholder': 'Báº¡n Äang tÃ¬m gÃ¬?',
    'search.cancel': 'Há»§y',
    'search.noResults': 'KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m',
    'search.error': 'KhÃ´ng thá» tÃ¬m kiáº¿m sáº£n pháº©m',
    // Navbar
    'navbar.search': 'TÃM KIáº¾M',
    'navbar.cart': 'GIá» HÃNG',
    'navbar.wishlist': 'YÃU THÃCH',
    'navbar.account': 'TÃI KHOáº¢N',
    'navbar.menu': 'MENU',
    'navbar.all': 'Táº¤T Cáº¢',
    'navbar.store': 'Cá»¬A HÃNG',
    'navbar.tops': 'ÃO',
    'navbar.tshirt': 'ÃO THUN',
    'navbar.shirt': 'ÃO SÆ  MI',
    'navbar.polo': 'ÃO POLO',
    'navbar.sweater': 'ÃO LEN',
    'navbar.hoodie': 'ÃO Ná»',
    'navbar.bottoms': 'QUáº¦N',
    'navbar.pants': 'QUáº¦N DÃI',
    'navbar.short': 'QUáº¦N SHORT',
    'navbar.skirt': 'VÃY',
    'navbar.accessories': 'PHá»¤ KIá»N',
    'navbar.cap': 'MÅ¨',
    'navbar.keychain': 'MÃC KHÃA',
    'navbar.towel': 'KHÄN',
    'navbar.collection': 'Bá» SÆ¯U Táº¬P',
    'navbar.acceptProblem': 'CHáº¤P NHáº¬N Váº¤N Äá»',
    'navbar.backToSummer': 'TRá» Láº I MÃA HÃ',
    'navbar.chillCalmDown': 'THÆ¯ GIÃN, BÃNH TÄ¨NH',
    'navbar.aboutUs': 'Vá» CHÃNG TÃI',
    'navbar.thankYou': 'Cáº£m Æ¡n báº¡n ÄÃ£ chá»n AISH. ChÃºng tÃ´i thá»±c sá»± trÃ¢n trá»ng Äiá»u ÄÃ³.',
    'navbar.thankYouMobile': 'ChÃºng tÃ´i thá»±c sá»± trÃ¢n trá»ng Äiá»u ÄÃ³.',
    // Home
    'home.hero.title': 'KHÃM PHÃ PHONG CÃCH Cá»¦A Báº N',
    'home.hero.subtitle': 'KhÃ¡m phÃ¡ bá» sÆ°u táº­p má»i nháº¥t cá»§a chÃºng tÃ´i',
    'home.hero.cta': 'MUA NGAY',
    'home.featured.title': 'Sáº¢N PHáº¨M Ná»I Báº¬T',
    'home.featured.viewAll': 'XEM Táº¤T Cáº¢',
    'home.categories.title': 'MUA THEO DANH Má»¤C',
    'home.categories.viewAll': 'XEM Táº¤T Cáº¢',
    // Product
    'product.addToCart': 'THÃM VÃO GIá»',
    'product.addToWishlist': 'THÃM VÃO YÃU THÃCH',
    'product.removeFromWishlist': 'XÃA KHá»I YÃU THÃCH',
    'product.size': 'KÃCH THÆ¯á»C',
    'product.color': 'MÃU Sáº®C',
    'product.quantity': 'Sá» LÆ¯á»¢NG',
    'product.description': 'MÃ Táº¢',
    'product.details': 'CHI TIáº¾T',
    'product.shipping': 'Váº¬N CHUYá»N',
    'product.returns': 'Äá»I TRáº¢',
    'product.noImage': 'KhÃ´ng cÃ³ hÃ¬nh áº£nh',
    'product.unnamed': 'Sáº£n pháº©m chÆ°a Äáº·t tÃªn',
    'product.soldOut': 'Háº¾T HÃNG',
    'product.shopThis': 'MUA NGAY',
    // Cart
    'cart.title': 'GIá» HÃNG Cá»¦A Báº N',
    'cart.empty': 'Giá» hÃ ng cá»§a báº¡n Äang trá»ng!',
    'cart.continueShopping': 'TIáº¾P Tá»¤C MUA Sáº®M',
    'cart.subtotal': 'Táº M TÃNH',
    'cart.shipping': 'PHÃ Váº¬N CHUYá»N',
    'cart.total': 'Tá»NG Cá»NG',
    'cart.checkout': 'THANH TOÃN',
    'cart.remove': 'XÃA',
    'cart.update': 'Cáº¬P NHáº¬T',
    'cart.viewCart': 'XEM GIá» HÃNG',
    // Checkout
    'checkout.title': 'THANH TOÃN',
    'checkout.shipping': 'THÃNG TIN GIAO HÃNG',
    'checkout.payment': 'PHÆ¯Æ NG THá»¨C THANH TOÃN',
    'checkout.review': 'KIá»M TRA ÄÆ N HÃNG',
    'checkout.placeOrder': 'Äáº¶T HÃNG',
    'checkout.address': 'Äá»A CHá»',
    'checkout.city': 'THÃNH PHá»',
    'checkout.country': 'QUá»C GIA',
    'checkout.phone': 'ÄIá»N THOáº I',
    'checkout.cardNumber': 'Sá» THáºº',
    'checkout.expiry': 'NGÃY Háº¾T Háº N',
    'checkout.cvv': 'CVV',
    // Validation
    'validation.requiredEmail': 'Vui lÃ²ng nháº­p Äá»a chá» email há»£p lá»',
    'validation.requiredPassword': 'Vui lÃ²ng nháº­p máº­t kháº©u há»£p lá»',
    'validation.requiredFirstName': 'Vui lÃ²ng nháº­p tÃªn cá»§a báº¡n',
    'validation.requiredLastName': 'Vui lÃ²ng nháº­p há» cá»§a báº¡n',
    'validation.requiredDate': 'Vui lÃ²ng nháº­p Äáº§y Äá»§ ngÃ y sinh',
    'validation.requiredUpdates': 'Báº¡n pháº£i Äá»ng Ã½ nháº­n cáº­p nháº­t',
    'validation.invalidEmail': 'Äá»nh dáº¡ng email khÃ´ng há»£p lá»',
    // Updates
    'updates.title': 'TÃ´i muá»n nháº­n cáº­p nháº­t',
    'updates.description': 'TÃ´i muá»n nháº­n cáº­p nháº­t (bao gá»m qua email, SMS, MMS, máº¡ng xÃ£ há»i, Äiá»n thoáº¡i...) vá» cÃ¡c hoáº¡t Äá»ng má»i cá»§a AISH, sáº£n pháº©m Äá»c quyá»n, dá»ch vá»¥ ÄÆ°á»£c tÃ¹y chá»nh vÃ  cÃ³ tráº£i nghiá»m khÃ¡ch hÃ ng cÃ¡ nhÃ¢n hÃ³a dá»±a trÃªn sá» thÃ­ch cá»§a tÃ´i.',
    // Care Instructions
    'care.title': 'HÆ¯á»NG DáºªN Báº¢O QUáº¢N',
    'care.description': 'LÃ m theo cÃ¡c hÆ°á»ng dáº«n sau Äá» duy trÃ¬ cháº¥t lÆ°á»£ng vÃ  tuá»i thá» cá»§a sáº£n pháº©m AISH.',
    'care.washing.title': 'GIáº¶T',
    'care.washing.tip1': 'Giáº·t mÃ¡y nÆ°á»c láº¡nh (30Â°C) vá»i mÃ u tÆ°Æ¡ng tá»±',
    'care.washing.tip2': 'Sá»­ dá»¥ng bá»t giáº·t nháº¹ vÃ  trÃ¡nh cháº¥t táº©y tráº¯ng',
    'care.washing.tip3': 'Lá»n trÃ¡i quáº§n Ã¡o trÆ°á»c khi giáº·t',
    'care.washing.tip4': 'KhÃ´ng ngÃ¢m trong thá»i gian dÃ i',
    'care.drying.title': 'PHÆ I KHÃ',
    'care.drying.tip1': 'Sáº¥y khÃ´ á» nhiá»t Äá» tháº¥p',
    'care.drying.tip2': 'Láº¥y ra ngay khi khÃ´',
    'care.drying.tip3': 'TrÃ¡nh Ã¡nh náº¯ng trá»±c tiáº¿p',
    'care.ironing.title': 'á»¦I',
    'care.ironing.tip1': 'á»¦i á» máº·t trÃ¡i',
    'care.ironing.tip2': 'Sá»­ dá»¥ng nhiá»t Äá» tháº¥p Äáº¿n trung bÃ¬nh',
    'care.ironing.tip3': 'KhÃ´ng á»§i lÃªn há»a tiáº¿t hoáº·c trang trÃ­',
    'care.storage.title': 'Báº¢O QUáº¢N',
    'care.storage.tip1': 'Cáº¥t á» nÆ¡i mÃ¡t máº», khÃ´ rÃ¡o',
    'care.storage.tip2': 'TrÃ¡nh Ã¡nh náº¯ng trá»±c tiáº¿p',
    'care.storage.tip3': 'Gáº¥p gá»n gÃ ng Äá» trÃ¡nh nhÄn',
    'care.footer': 'Äá» biáº¿t hÆ°á»ng dáº«n báº£o quáº£n cá»¥ thá», vui lÃ²ng tham kháº£o nhÃ£n trÃªn sáº£n pháº©m.'
  }
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>("en");
  const router = useRouter();

  // Load language preference from localStorage on mount
  useEffect(() => {
    if (typeof window !== 'undefined') {
      const savedLanguage = localStorage.getItem("language") as Language;
      if (savedLanguage && (savedLanguage === 'en' || savedLanguage === 'vi')) {
        setLanguage(savedLanguage);
      }
    }
  }, []);

  // Save language preference to localStorage when it changes
  const handleLanguageChange = (newLanguage: string) => {
    const lang = newLanguage.toLowerCase() as Language;
    if (lang === 'en' || lang === 'vi') {
      setLanguage(lang);
      if (typeof window !== 'undefined') {
        localStorage.setItem("language", lang);
      }
      router.refresh();
    }
  };

  const t = (key: TranslationKey): string => {
    return translations[language][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage: handleLanguageChange, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error("useLanguage must be used within a LanguageProvider");
  }
  return context;
} 